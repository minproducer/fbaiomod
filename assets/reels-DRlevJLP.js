const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./videos-CoQTeQLu.js","./index-BoH2j3cU.js","./index-DY-hiTTZ.css","./MyApp-D93h0aQZ.js"])))=>i.map(i=>d[i]);
import{aQ as e}from"./index-BoH2j3cU.js";import{y as o,x as i,aB as l,X as n}from"./MyApp-D93h0aQZ.js";async function d({id:l="",cursor:n=""}){var d,r,_;const t=await o({fb_api_req_friendly_name:"ProfileCometAppCollectionReelsRendererPaginationQuery",variables:{count:10,cursor:n,feedLocation:"COMET_MEDIA_VIEWER",feedbackSource:65,focusCommentID:null,renderLocation:null,scale:1,useDefaultActor:!0,id:btoa("app_collection:"+l+":168684841768375:260")},doc_id:"7821270511254925"}),a=i((null==(d=null==t?void 0:t.split("\n"))?void 0:d[0])||"{}");console.log(a);const{edges:s=[],page_info:u={}}=(null==(_=null==(r=null==a?void 0:a.data)?void 0:r.node)?void 0:_.aggregated_fb_shorts)||{},{extractVideoInfo:v}=await e((async()=>{const{extractVideoInfo:e}=await import("./videos-CoQTeQLu.js");return{extractVideoInfo:e}}),__vite__mapDeps([0,1,2,3]),import.meta.url);return s.map((e=>{var o,i,l,n,d,r,_,t,a,s,c,p;const f=(null==(i=null==(o=null==e?void 0:e.profile_reel_node)?void 0:o.node)?void 0:i.short_form_video_context)||{};return{...v(null==f?void 0:f.playback_video),id:(null==(d=null==(n=null==(l=null==e?void 0:e.profile_reel_node)?void 0:l.node)?void 0:n.video)?void 0:d.id)||atob(null==(r=null==e?void 0:e.profile_reel_node)?void 0:r.id).split(":").pop(),description:null==(a=null==(t=null==(_=null==e?void 0:e.profile_reel_node)?void 0:_.node)?void 0:t.message)?void 0:a.text,viewCount:null==f?void 0:f.play_count_reduced,created_time:1e3*((null==(c=null==(s=null==e?void 0:e.profile_reel_node)?void 0:s.node)?void 0:c.creation_time)||0)+"",url:null==f?void 0:f.shareable_url,cursor:(null==e?void 0:e.cursor)||u.end_cursor,music:null==f?void 0:f.track_title,length:null==(p=null==f?void 0:f.playback_video)?void 0:p.length_in_second}}))}async function r({page_id:d="",group_id_list:r=[],root_video_id:_="",cursor:t=""}){const a=t?await o({fb_api_req_friendly_name:"FBReelsContainerQuery",variables:{count:5,cursor:t,feedLocation:"COMET_MEDIA_VIEWER",feedbackSource:65,focusCommentID:null,group_id_list:r,recent_vpvs_v2:[],referral_source:"fb_shorts_bookmark",renderLocation:"fb_shorts_video_deep_dive",root_video_id:_||null,scale:2,surface_type:"FEED_VIDEO_DEEP_DIVE",useDefaultActor:!1,__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider:!1,__relay_internal__pv__IsWorkUserrelayprovider:!1},doc_id:"9277146635647891"}):await o({fb_api_req_friendly_name:"FBReelsRootWithEntrypointQuery",variables:{count:1,defer_comments_loading:!1,feedbackSource:65,feedLocation:"COMET_MEDIA_VIEWER",focusCommentID:null,group_id_list:r,initial_node_id:"",isAggregationProfileViewerOrShouldShowReelsForPage:!1,page_id:d,recent_vpvs_v2:[],referral_source:"fb_shorts_bookmark",renderLocation:"fb_shorts_video_deep_dive",root_video_id:_||null,root_video_tracking_key:"",scale:2,shouldIncludeInitialNodeFetch:!1,shouldShowReelsForPage:!1,surface_type:"FEED_VIDEO_DEEP_DIVE",__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider:!1,__relay_internal__pv__IsWorkUserrelayprovider:!1},doc_id:"27470664929247812"}),s=i(a,[],!0),{edges:u=[],page_info:v}=l(s[0]),c=n(s,"all_video_dash_prefetch_representations",!1)||[],{extractVideoVariants:p}=await e((async()=>{const{extractVideoVariants:e}=await import("./videos-CoQTeQLu.js");return{extractVideoVariants:e}}),__vite__mapDeps([0,1,2,3]),import.meta.url);return u.map((e=>{var o,i,l,n,d,r,_,t,a,s,u,f,y,m,g,b,h,w,E,k,D,I,R,V,x,S,F,A,C,M,O,P,L,q,j;const B=null==(o=null==e?void 0:e.node)?void 0:o.short_form_video_context,W=null==(i=null==B?void 0:B.video)?void 0:i.id,T=["browser_native_hd_url","browser_native_sd_url"].map((e=>{var o,i;return null==(i=null==(o=null==B?void 0:B.playback_video)?void 0:o.videoDeliveryLegacyFields)?void 0:i[e]})).find((e=>!!e)),Q=null==(n=null==(l=["HD","SD"].map((e=>{var o,i,l,n;return null==(n=null==(l=null==(i=null==(o=null==B?void 0:B.playback_video)?void 0:o.videoDeliveryResponseFragment)?void 0:i.videoDeliveryResponseResult)?void 0:l.progressive_urls)?void 0:n.find((o=>{var i;return(null==(i=null==o?void 0:o.metadata)?void 0:i.quality)===e}))})))?void 0:l.find((e=>!!e.progressive_url)))?void 0:n.progressive_url,U=c.find((e=>e.video_id===W)),N=null==(_=null==(r=null==(d=null==U?void 0:U.representations)?void 0:d.sort(((e,o)=>e.bandwidth-o.bandwidth)))?void 0:r[0])?void 0:_.base_url;return{id:null==e?void 0:e.id,caption:null==(a=null==(t=null==e?void 0:e.node)?void 0:t.message)?void 0:a.text,translated_caption:null==(u=null==(s=null==e?void 0:e.node)?void 0:s.translated_message_for_viewer)?void 0:u.text,post_id:null==(f=null==e?void 0:e.node)?void 0:f.post_id,sound:{id:null==(y=null==B?void 0:B.soundtrack_info)?void 0:y.id,title:null==B?void 0:B.track_title},owner:{id:null==(m=null==B?void 0:B.video_owner)?void 0:m.id,avatar:null==(b=null==(g=null==B?void 0:B.video_owner)?void 0:g.displayPicture)?void 0:b.uri,name:null==(h=null==B?void 0:B.video_owner)?void 0:h.name,url:null==(w=null==B?void 0:B.video_owner)?void 0:w.url,ig_username:"InstagramUserV2"==(null==(E=null==B?void 0:B.video_owner)?void 0:E.__isActor)?null==(k=null==B?void 0:B.video_owner)?void 0:k.username:""},video:{id:W,owner:null==(D=null==B?void 0:B.video_owner)?void 0:D.id,length:(null==(I=null==B?void 0:B.video)?void 0:I.playable_duration_in_ms)||1e3*((null==(R=null==B?void 0:B.playback_video)?void 0:R.length_in_second)||0),url:null==B?void 0:B.shareable_url,width:null==(V=null==B?void 0:B.playback_video)?void 0:V.width,height:null==(x=null==B?void 0:B.playback_video)?void 0:x.height,source:T||Q||N,created_time:1e3*((null==(S=null==e?void 0:e.node)?void 0:S.creation_time)||0)+"",thumbnail:null==(F=null==B?void 0:B.video)?void 0:F.first_frame_thumbnail,variants:p((null==(C=null==(A=null==B?void 0:B.playback_video)?void 0:A.videoDeliveryLegacyFields)?void 0:C.dash_manifest_xml_string)||(null==(q=null==(L=null==(P=null==(O=null==(M=null==B?void 0:B.playback_video)?void 0:M.videoDeliveryResponseFragment)?void 0:O.videoDeliveryResponseResult)?void 0:P.dash_manifests)?void 0:L[0])?void 0:q.manifest_xml)),quality:null==(j=null==B?void 0:B.playback_video)?void 0:j.min_quality_preference},cursor:(null==e?void 0:e.cursor)||(null==v?void 0:v.end_cursor)}}))}JSON.stringify({qid:"-909642526462335516",mf_story_key:"1169687781834225",top_level_post_id:"1169687781834225",content_owner_id_new:"100063790413558",page_id:"105709027913953",story_location:153,story_attachment_style:"fb_shorts_creation",video_id:"1735896850598697",sty:128,mf_objid:"1169687781834225",ent_attachement_type:"FBShortsStoryAttachment",app_id:"2392950137",page_insights:{100063790413558:{page_id:"100063790413558",page_id_type:"page",actor_id:"100063790413558",dm:{isShare:0,originalPostOwnerID:0,sharedMediaID:0,sharedMediaOwnerID:0},psn:"EntStatusCreationStory",post_context:{object_fbtype:266,publish_time:1731474065,story_name:"EntStatusCreationStory",story_fbid:["1169687781834225"]},role:1,sl:153,targets:[{actor_id:"100063790413558",page_id:"100063790413558",post_id:"1169687781834225",role:1,share_id:0}]}},actrs:"100063790413558",fb_shorts_tray_mf_story_key:"-2242439210195115141",fb_shorts_tray_query_id:"-909642526489079076",fb_shorts_ifu_tray_index:1,fb_shorts_ifu_tray_position:12,fb_shorts_ranking_request_id:"-909710971046028682",tds_flgs:3});export{r as getReelsFeed,d as getUserReels};
