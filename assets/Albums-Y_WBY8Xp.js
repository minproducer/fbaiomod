import{r as e,b3 as i,b8 as t}from"./index-BoH2j3cU.js";import{u as s,d as n,z as a,S as o,B as l,g as r,I as d,h as m,T as c,c as u,e as h,f as p,A as j,s as x}from"./MyApp-D93h0aQZ.js";import g from"./Collection-CEHJdMiC.js";import{getHiddenAlbums as b,getGroupAlbum as f,getUserAlbum as v}from"./albums-B11oZ7Ln.js";import w from"./useCacheState-CRWoF5gI.js";import{B as y}from"./BadgeWrapper-D2jAMD-I.js";import{L as k}from"./index-BJjUIN-g.js";import"./index-CLQrWQaN.js";import"./react-hotkeys-hook.esm-V0Xz-7zA.js";import"./index-DD15UiBp.js";import"./index-p3GZU5lJ.js";import"./index-BS-7HFpi.js";import"./index-DWB43XHw.js";import"./Dropdown-C4ZC00F-.js";import"./PurePanel-DNUOZ5MP.js";import"./move-DCq-oE7y.js";import"./index-7X6rB-D6.js";import"./SearchOutlined-BUONfEHJ.js";import"./row-B1CxNhq6.js";import"./useBreakpoint-CUrvcDr2.js";import"./index-BwkmqrWl.js";import"./index-CTitp5Qg.js";import"./List-BGWr2xJE.js";import"./index-UsPtaxTh.js";import"./DownOutlined-DRGhK8zp.js";import"./Pagination-CIrtJa5e.js";import"./col-pZhDRk6E.js";function T({target:T,onOpenAlbum:C}){const{ti:_}=s(),{message:N}=n(),[S,B]=w("hiddenAlbums_"+(null==T?void 0:T.id),[]),[$,D]=e.useState(!1),F=e.useCallback((async()=>{if(!(null==T?void 0:T.id)||!(null==T?void 0:T.type))return;D(!0);const e=await b(T.id);console.log(e),e?(N.success(_({en:`Found ${e.length} hidden albums`,vi:`Tìm thấy ${e.length} album ẩn`})),B(e)):N.error(_({en:"No hidden albums found",vi:"Không tìm thấy album ẩn nào"})),D(!1)}),[T,C]),I=e.useCallback((async(e=[])=>{var i,t;if(!(null==T?void 0:T.id)||!(null==T?void 0:T.type))return;const s=null==(i=null==e?void 0:e[(null==e?void 0:e.length)-1])?void 0:i.cursor,n=T.type===a.Group?await f({groupId:T.id,cursor:s}):await v({uid:T.id,cursor:s});if(null==(t=n.albums)?void 0:t.length){let i=new Set(e.map((e=>e.id)));return n.albums.filter((e=>!i.has(e.id)))}return[]}),[T]),P=e.useCallback((e=>i.jsx(k.Item,{children:i.jsxs(o,{direction:"vertical",children:[i.jsx(l.Ribbon,{text:r(e.count),children:i.jsxs("div",{className:"show-on-hover-trigger",children:[i.jsx(d,{src:e.picture,alt:e.name,width:150,height:150,fallback:"https://placehold.co/150x150",style:{objectFit:"cover",borderRadius:"10px",cursor:"pointer"},preview:!1,onClick:()=>{null==C||C(e)}}),i.jsx(t,{type:"default",icon:i.jsx("i",{className:"fa-solid fa-up-right-from-square"}),style:{position:"absolute",bottom:5,right:5},className:"show-on-hover-item",target:"_blank",href:m(e.id)}),(e.created_time||e.updated_time)&&i.jsxs(o,{direction:"vertical",style:{position:"absolute",bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",padding:5,borderTopRightRadius:10},children:[e.created_time&&i.jsx(c,{title:_({en:"Created at ",vi:"Tạo lúc "})+p(new Date(e.created_time).getTime(),{showTime:!0}),children:i.jsxs(u.Text,{children:[i.jsx("i",{className:"fa-solid fa-plus"})," ",h(new Date(e.created_time).getTime())]})}),e.updated_time&&i.jsx(c,{title:_({en:"Last updated at ",vi:"Cập nhật lần cuối lúc "})+p(new Date(e.updated_time).getTime(),{showTime:!0}),children:i.jsxs(u.Text,{children:[i.jsx("i",{className:"fa-solid fa-pen-to-square"})," ",h(new Date(e.updated_time).getTime())]})})]})]})}),i.jsx(u.Paragraph,{style:{maxWidth:"150px",wordWrap:"break-word"},onClick:()=>window.open(e.link),children:e.name})]})},e.id)),[]),A=e.useCallback((()=>i.jsxs(o,{direction:"vertical",align:"center",children:[(null==S?void 0:S.length)>0&&i.jsxs(o,{direction:"vertical",align:"center",children:[i.jsxs(u.Title,{level:4,children:[_({en:`Found ${S.length} hidden albums`,vi:`Tìm thấy ${S.length} album ẩn`}),":"]}),i.jsx(o,{wrap:!0,align:"start",style:{justifyContent:"center"},children:S.map(P)})]}),i.jsx(j,{showIcon:!0,type:"info",message:_({en:"Click any album to view photos",vi:"Click album bất kỳ để xem ảnh"})})]})),[_,S,P]);return i.jsx(g,{collectionName:(null==T?void 0:T.name)+" - Albums",fetchNext:I,renderItem:P,rowKey:e=>e.id,header:A,searchPlaceholder:e=>_({en:`Search in ${null==e?void 0:e.length} albums...`,vi:`Tìm trong ${e.length} albums...`}),onSearch:(e,i)=>x(e,i.name),headerButtons:e=>(null==T?void 0:T.type)===a.Group?null:i.jsx(y,{type:"new",children:i.jsx(c,{title:i.jsxs(i.Fragment,{children:[_({en:"Including wall album, mobile album, ...",vi:"Bao gồm album Ảnh trên dòng thời gian, Tải lên từ di động, ..."}),i.jsx(t,{type:"link",href:"https://www.facebook.com/groups/fbaio/posts/1668900333764648",target:"_blank",icon:i.jsx("i",{className:"fa-solid fa-up-right-from-square"}),iconPosition:"end",children:_({en:"See more",vi:"Xem thêm"})})]}),children:i.jsx(t,{icon:i.jsx("i",{className:"fa-solid fa-eye-slash"}),onClick:F,loading:$,children:_({en:"Find hidden albums",vi:"Tìm album ẩn"})})})})})}export{T as default};
