import{r as e,b3 as i,b8 as t}from"./index-BoH2j3cU.js";import{u as o}from"./useForceStop-BT3l6lDG.js";import{u as n,d as a,I as r,S as s,T as d,A as m,g as l,t as c}from"./MyApp-D93h0aQZ.js";import p from"./MyTable-B-PXqHUM.js";import{getGroupMemberCount as u,getGroupMembers as j}from"./groups-D329Q9FY.js";import x from"./useCacheState-CRWoF5gI.js";import{R as v}from"./row-B1CxNhq6.js";import{A as h}from"./index-BMF_2O9_.js";import{T as f}from"./index-DFDl0PJq.js";import"./index-CLQrWQaN.js";import"./Table-CSd7eQib.js";import"./List-BGWr2xJE.js";import"./DownOutlined-DRGhK8zp.js";import"./index-BaNQURuW.js";import"./index-BS-7HFpi.js";import"./index-p3GZU5lJ.js";import"./index-DWB43XHw.js";import"./Dropdown-C4ZC00F-.js";import"./PurePanel-DNUOZ5MP.js";import"./move-DCq-oE7y.js";import"./index-CTitp5Qg.js";import"./index-UsPtaxTh.js";import"./SearchOutlined-BUONfEHJ.js";import"./useBreakpoint-CUrvcDr2.js";import"./Pagination-CIrtJa5e.js";import"./index-7X6rB-D6.js";import"./index-DD15UiBp.js";function g({target:g}){const{ti:y}=n();o();const{message:b}=a(),[T,C]=e.useState(!1),[k,A]=x("GroupMembers."+(null==g?void 0:g.id)+".count",null),[I,M]=x("GroupMembers."+(null==g?void 0:g.id)+".data",[]),[w,S]=x("GroupMembers.loadMoreCount",10),G=e.useMemo((()=>I.map(((e,i)=>({...e,recent:i})))),[I]);e.useEffect((()=>{(null==g?void 0:g.id)&&(null==g?void 0:g.type)&&(C(!0),u(null==g?void 0:g.id).then((e=>{A(e)})).finally((()=>{C(!1)})))}),[g]);const L=async()=>{if(!(null==g?void 0:g.id))return;const e="GroupMembers."+(null==g?void 0:g.id)+".reload";c(e),b.loading({key:e,content:y({en:"Reloading...",vi:"Đang tải lại..."}),duration:0}),C(!0);const i=await j({groupId:(null==g?void 0:g.id)||""});M(i),C(!1),b.success({key:e,content:y({en:"Reloaded",vi:"Đã tải xong"})})},N=()=>{},R=[{title:"#",dataIndex:"recent",key:"recent",render:(e,i,t)=>(i.recent||0)+1},{title:y({en:"Name",vi:"Tên"}),key:"name",dataIndex:"name",sorter:(e,i)=>e.name.localeCompare(i.name),render:(e,t,o)=>i.jsxs(v,{align:"middle",children:[i.jsx(h,{shape:"square",src:i.jsx(r,{src:t.avatar}),size:50}),i.jsx("a",{href:t.url,target:"_blank",style:{marginLeft:"10px"},children:i.jsx("b",{children:t.name})})]}),width:"auto"},{title:"Uid",dataIndex:"id",key:"id",sorter:(e,i)=>e.id.localeCompare(i.id),width:150},{title:y({en:"Joined time",vi:"Tham gia lúc"}),dataIndex:"joinedTime",key:"joinedTime",sorter:(e,i)=>e.joinedTime.localeCompare(i.joinedTime)},{title:y({en:"Last Active",vi:"Hoạt động gần nhất"}),dataIndex:"lastActiveTime",key:"lastActiveTime",sorter:(e,i)=>e.lastActiveTime.localeCompare(i.lastActiveTime)}];return i.jsx(p,{columns:R,data:G,keyExtractor:e=>e.id,searchable:!0,renderTitle:e=>i.jsxs(i.Fragment,{children:[i.jsx(t,{type:"primary",loading:T,icon:i.jsx("i",{className:"fa-solid fa-rotate-right"}),onClick:L,children:y({en:"Reload",vi:"Tải lại"})}),i.jsxs(s.Compact,{children:[i.jsx(t,{loading:T,onClick:N,icon:i.jsx("i",{className:"fa-solid fa-play"}),children:y({en:"Load more",vi:"Tải thêm"})}),i.jsx(d,{title:y({en:"Number of members to load more",vi:"Số lượng thành viên muốn tải thêm"}),children:i.jsx(f,{min:1,max:null==k?void 0:k.memberCount,value:w,onChange:e=>S(e)})})]}),i.jsx(m,{showIcon:!0,type:"info",message:`${null==k?void 0:k.adminCount} admins. ${l(null==k?void 0:k.memberCount)} ${y({en:"members",vi:"thành viên"})}`})]})})}export{g as default};
