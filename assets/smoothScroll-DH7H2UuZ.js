function e(){window.fbaio_smoothScroll_disable&&window.fbaio_smoothScroll_disable()}function t(){let e,t={animationTime:400,stepSize:100,pulseScale:4,pulseNormalize:1,accelerationDelta:50,accelerationMax:3,arrowScroll:50},n=!1,o={x:0,y:0},l=!1,i=document.documentElement,r=/^Mac/.test(navigator.platform),a=/Linux/i.test(navigator.userAgent),c=37,u=38,s=39,d=40,m=32,f=33,h=34,w=35,p=36,y={37:1,38:1,39:1,40:1};function b(){if(l||!document.body)return;l=!0;let t=document.body,o=document.documentElement,r=window.innerHeight,a=t.scrollHeight;if(i=document.compatMode.indexOf("CSS")>=0?o:t,e=t,top!=self)n=!0;else if(a>r&&t.clientHeight+1<t.scrollHeight&&o.clientHeight+1<o.scrollHeight&&i.offsetHeight<=r){let e=document.createElement("div");e.style.clear="both",t.appendChild(e)}n||Z("message",(function(e){if("SmoothScroll"==e.data.SS){let t=e.data;t.target=function(e){let t=document.getElementsByTagName("iframe");return[].filter.call(t,(function(t){return t.contentWindow===e.source}))[0]}(e),x(t)}}))}const g=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};let A=[],v=null,k=g();function S(e,n,l){var i,r;i=(i=n)>0?1:-1,r=(r=l)>0?1:-1,(o.x!==i||o.y!==r)&&(o.x=i,o.y=r,A=[],k=0,window.cancelAnimationFrame(v),v=null);{let e=g()-k;if(e<t.accelerationDelta){let o=(1+50/e)/2;o>1&&(o=Math.min(o,t.accelerationMax),n*=o,l*=o)}k=g()}if(A.push({x:n,y:l,lastX:n<0?.99:-.99,lastY:l<0?.99:-.99,start:g()}),v)return;let a=U(),c=e===a||e===document.body;null==e.$scrollBehavior&&function(e){let t=C(e);if(null==H[t]){let n=getComputedStyle(e,"")["scroll-behavior"];H[t]="smooth"==n}return H[t]}(e)&&(e.$scrollBehavior=e.style.scrollBehavior,e.style.scrollBehavior="auto");let u=function(o){let i=g(),r=0,a=0;for(let e=0;e<A.length;e++){let n=A[e],o=i-n.start,l=o>=t.animationTime,c=l?1:o/t.animationTime;c=q(c);let u=n.x*c-n.lastX|0,s=n.y*c-n.lastY|0;r+=u,a+=s,n.lastX+=u,n.lastY+=s,l&&(A.splice(e,1),e--)}c?window.scrollBy(r,a):(r&&(e.scrollLeft+=r),a&&(e.scrollTop+=a)),n||l||(A=[]),A.length?v=window.requestAnimationFrame(u):(v=null,null!=e.$scrollBehavior&&(e.style.scrollBehavior=e.$scrollBehavior,e.$scrollBehavior=null))};v=window.requestAnimationFrame(u)}function x(o){l||b();let i=o.target;if(o.defaultPrevented||o.ctrlKey)return!0;if(_(e,"embed")||_(i,"embed")&&/\.pdf/i.test(i.src)||_(e,"object")||i.shadowRoot)return!0;let c=-o.wheelDeltaX||o.deltaX||0,u=-o.wheelDeltaY||o.deltaY||0;if(r&&(o.wheelDeltaX&&z(o.wheelDeltaX,120)&&(c=o.wheelDeltaX/Math.abs(o.wheelDeltaX)*-120),o.wheelDeltaY&&z(o.wheelDeltaY,120)&&(u=o.wheelDeltaY/Math.abs(o.wheelDeltaY)*-120)),a){let e=o.ctrlKey||o.altKey||o.metaKey;o.shiftKey&&!e&&(c=c||u,u=0)}c||u||(u=-o.wheelDelta||0),1===o.deltaMode&&(c*=40,u*=40);let s=K(i,c&&!u);if(!s)return n&&(o.preventDefault(),function(e,t){parent.postMessage({deltaX:e,deltaY:t,SS:"SmoothScroll"},"*")}(c,u)),!0;Math.abs(c)>1.2&&(c*=t.stepSize/120),Math.abs(u)>1.2&&(u*=t.stepSize/120),S(s,c,u),o.preventDefault&&o.preventDefault(),T()}function B(o){let l=o.target,i=o.ctrlKey||o.altKey||o.metaKey||o.shiftKey&&o.keyCode!==m;document.contains(e)||(e=document.activeElement);let r=/^(button|submit|radio|checkbox|file|color|image)$/i;if(o.defaultPrevented||/^(textarea|select|embed|object)$/i.test(l.nodeName)||_(l,"input")&&!r.test(l.type)||_(e,"video")||function(e){let t=e.target,n=!1;if(-1!=document.URL.indexOf("www.youtube.com/watch"))do{if(n=t.classList&&t.classList.contains("html5-video-controls"),n)break}while(t=t.parentNode);return n}(o)||l.isContentEditable||i)return!0;if((_(l,"button")||_(l,"input")&&r.test(l.type))&&o.keyCode===m)return!0;if(_(l,"input")&&"radio"==l.type&&y[o.keyCode])return!0;let a=o.keyCode==c||o.keyCode==s,b=K(e,a);if(!b)return!n||parent.keydown(o);let g,A=b.clientHeight,v=0,k=0;switch(b==document.body&&(A=window.innerHeight),o.keyCode){case u:k=-50;break;case d:k=t.arrowScroll;break;case m:g=o.shiftKey?1:-1,k=-g*A*.9;break;case f:k=.9*-A;break;case h:k=.9*A;break;case p:b==document.body&&document.scrollingElement&&(b=document.scrollingElement),k=-b.scrollTop;break;case w:let e=b.scrollHeight-b.scrollTop-A;k=e>0?e+10:0;break;case c:v=-50;break;case s:v=t.arrowScroll;break;default:return!0}S(b,v,k),o.preventDefault(),T()}function D(t){e=t.target}let M,C=function(){let e=0;return function(t){return t.uniqueID||(t.uniqueID=e++)}}(),E={},Y={},H={};function T(){clearTimeout(M),M=setInterval((function(){E=Y=H={}}),1e3)}function X(e,t,n){let o=n?E:Y;for(let l=e.length;l--;)o[C(e[l])]=t;return t}function F(e,t){return(t?E:Y)[C(e)]}function K(e,t){let o=[],l=document.body,r=i.scrollHeight,a=i.scrollWidth;do{let c=F(e,t);if(c)return X(o,c,t);if(o.push(e),t&&a===e.scrollWidth||!t&&r===e.scrollHeight){let e=I(i,t)&&I(l,t)||R(i,t);if(n&&N(i,t)||!n&&e)return X(o,U(),t)}else if(N(e,t)&&R(e,t))return X(o,e,t)}while(e=e.parentElement)}function N(e,t){return t?e.clientWidth+10<e.scrollWidth:e.clientHeight+10<e.scrollHeight}function L(e,t){let n=t?"overflow-x":"overflow-y";return getComputedStyle(e,"").getPropertyValue(n)}function I(e,t){return"hidden"!=L(e,t)}function R(e,t){return/^(scroll|auto)$/.test(L(e,t))}function Z(e,t,n){window.addEventListener(e,t,n||!1)}function W(e,t,n){window.removeEventListener(e,t,!1)}function _(e,t){return e&&(e.nodeName||"").toLowerCase()===t.toLowerCase()}function z(e,t){return Math.floor(e/t)==e/t}let J=localStorage.getItem("deltaBuffer");function U(){return document.scrollingElement||document.body}function $(e){let n,o,l;return(e*=t.pulseScale)<1?n=e-(1-Math.exp(-e)):(o=Math.exp(-1),e-=1,l=1-Math.exp(-e),n=o+l*(1-o)),n*t.pulseNormalize}function q(e){return e>=1?1:e<=0?0:(1==t.pulseNormalize&&(t.pulseNormalize/=$(1)),$(e))}J&&JSON.parse(J);let V="onwheel"in document.createElement("div")?"wheel":"mousewheel";Z(V,x,{passive:!1}),Z("mousedown",D),Z("keydown",B),Z("load",(function(){setTimeout((function(){b(),W("keydown",B),Z("keydown",B)}),1)}));const G=function(e){let t={frameRate:200},n=document.createElement("div"),o=!1,l=-1!=navigator.platform.indexOf("Linux");async function i(){let e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFKysr////CZBcAgAAAAJ0Uk5T/wDltzBKAAAAQElEQVR42mJgxAIYyBBkYMAUZGBAiDIgicFF8ZjJgIWLZBoDTBDZCjATpyBW7dgtwuVN7I7H5k3sAUJeIAMEGAAicwFhf63hcwAAAABJRU5ErkJggg==";n.style.background="url("+e+") no-repeat",n.style.position="fixed",n.style.zIndex="999999999",n.style.width="20px",n.style.height="20px",(new Image).src=e}function r(i){if(1!==i.button)return!0;let r=!1,a=i.target,c=l&&(/input|textarea/i.test(a.nodeName)||a.isContentEditable);do{if(r=_(a,"a"),r)break}while(a=a.parentNode);if(a=K(i.target),!a||r||c)return!0;if(i.preventDefault(),o)return!1;o=!0,n.style.left=i.clientX-10+"px",n.style.top=i.clientY-10+"px",document.body.appendChild(n);let u=i.clientX,s=i.clientY,d=0,m=0,f=g(),h=1e3/t.frameRate,w=!1;e.requestAnimationFrame((function t(n){let o=g(),l=o-f;a==document.body?e.scrollBy(d*l,m*l):(a.scrollLeft+=d*l|0,a.scrollTop+=m*l|0),f=o,w||e.requestAnimationFrame(t)}),a,h);let p=!0;function y(e){let t=Math.abs(u-e.clientX),n=Math.abs(s-e.clientY),o=Math.max(t,n)>10;p&&o&&(Z("mouseup",b),p=!1),d=10*(e.clientX-u)/1e3,m=10*(e.clientY-s)/1e3}function b(e){W("mousemove",y),W("mousedown",b),W("mouseup",b),W("keydown",b),document.body.removeChild(n),o=!1,w=!0}Z("mousemove",y),Z("mousedown",b),Z("keydown",b)}return Z("mousedown",r),"complete"===document.readyState?i():Z("load",i),function(){W("mousedown",r)}}(window);return window.fbaio_smoothScroll_disable=()=>{W(V,x),W("mousedown",D),W("keydown",B),G(),window.fbaio_smoothScroll_disable=null},window.fbaio_smoothScroll_disable}export{e as disableSmoothScroll,t as enableSmoothScroll};
