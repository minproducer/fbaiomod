const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ImageLazyPreview-BzCZNgqu.js","./index-BoH2j3cU.js","./index-DY-hiTTZ.css","./useCacheState-CRWoF5gI.js","./MyApp-D93h0aQZ.js"])))=>i.map(i=>d[i]);
import{r as i,b3 as e,b4 as t,b8 as o,aQ as s}from"./index-BoH2j3cU.js";import r from"./Collection-CEHJdMiC.js";import{u as a,d as n,z as l,h as d}from"./MyApp-D93h0aQZ.js";import{PhotoCollectionType as m,getGroupPhotos as p,getUserPhotos as u,PhotoCollectionTypeLang as c,getLargestPhoto as h}from"./photos-jBKQrPG2.js";import{S as j}from"./index-CTitp5Qg.js";import{L as g}from"./index-BJjUIN-g.js";import"./index-CLQrWQaN.js";import"./useCacheState-CRWoF5gI.js";import"./react-hotkeys-hook.esm-V0Xz-7zA.js";import"./index-DD15UiBp.js";import"./index-p3GZU5lJ.js";import"./index-BS-7HFpi.js";import"./index-DWB43XHw.js";import"./Dropdown-C4ZC00F-.js";import"./PurePanel-DNUOZ5MP.js";import"./move-DCq-oE7y.js";import"./index-7X6rB-D6.js";import"./SearchOutlined-BUONfEHJ.js";import"./row-B1CxNhq6.js";import"./useBreakpoint-CUrvcDr2.js";import"./index-BwkmqrWl.js";import"./List-BGWr2xJE.js";import"./index-UsPtaxTh.js";import"./DownOutlined-DRGhK8zp.js";import"./Pagination-CIrtJa5e.js";import"./col-pZhDRk6E.js";const v=t((()=>s((()=>import("./ImageLazyPreview-BzCZNgqu.js")),__vite__mapDeps([0,1,2,3,4]),import.meta.url)));function f({target:t}){const{ti:s}=a(),{message:f}=n(),[x,b]=i.useState(m.OWNER);i.useEffect((()=>{(null==t?void 0:t.id)&&b(m.OWNER)}),[null==t?void 0:t.id]);const y=i.useCallback((async(i,e)=>{var o,s;if((null==t?void 0:t.id)&&(null==t?void 0:t.type)){if(t.type===l.Group){const s=e||(null==(o=null==i?void 0:i[(null==i?void 0:i.length)-1])?void 0:o.cursor)||"";return await p({id:t.id,cursor:s})}{const o=null==i?void 0:i.filter((i=>i.photo_type===x)),r=e||(null==(s=null==o?void 0:o[(null==o?void 0:o.length)-1])?void 0:s.cursor)||"";return await u({id:t.id,cursor:r,type:x})}}}),[t,x]),w=i.useCallback(((i,o)=>(null==t?void 0:t.type)!==l.Group&&e.jsx(j,{disabled:o,value:x,onChange:b,popupMatchSelectWidth:!1,children:Object.entries(m).map((([i,t])=>e.jsx(j.Option,{value:t,children:s(c[t])},i)))})),[x,s]),C=i.useCallback((i=>e.jsxs(g.Item,{className:"show-on-hover-trigger",children:[e.jsx(v,{src:i.thumbnail,alt:i.accessibility_caption,width:150,height:150,style:{objectFit:"cover",borderRadius:"10px"},cacheId:"photos."+i.id,getPreview:()=>i.image||h(i.id).then((i=>i.image))}),e.jsx(o,{type:"default",icon:e.jsx("i",{className:"fa-solid fa-up-right-from-square"}),style:{position:"absolute",bottom:10,right:10},className:"show-on-hover-item",target:"_blank",href:d(i.id)})]},i.id)),[]),_=i.useCallback((async(i,e)=>{if(!i.image&&(null==t?void 0:t.type)===l.Group){const e=await h(i.id);e.image||f.error(s({en:"Cannot get largest photo",vi:"Lỗi lấy ảnh chất lượng cao"})),i.image=e.image||e.thumbnail||i.thumbnail}return{url:i.image,name:i.id+".jpg"}}),[null==t?void 0:t.id]);return e.jsx(r,{collectionName:(null==t?void 0:t.name)+" - Photos - "+s(c[x]),fetchNext:y,renderItem:C,downloadItem:_,headerButtons:w,getItemCursor:i=>i.cursor||"",rowKey:i=>i.id})}export{f as default};
