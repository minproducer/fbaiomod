const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VideoViewer-HdQ6aks3.js","./index-BoH2j3cU.js","./index-DY-hiTTZ.css","./videos-CoQTeQLu.js","./MyApp-D93h0aQZ.js","./Media-iJ6K35w7.js","./posts-DhPOCJyC.js","./useCacheState-CRWoF5gI.js","./reactions-CXN7tjxZ.js","./download-KJKGHAGZ.js","./Table-CSd7eQib.js","./List-BGWr2xJE.js","./DownOutlined-DRGhK8zp.js","./index-BaNQURuW.js","./index-BS-7HFpi.js","./index-p3GZU5lJ.js","./index-DWB43XHw.js","./Dropdown-C4ZC00F-.js","./PurePanel-DNUOZ5MP.js","./move-DCq-oE7y.js","./index-CTitp5Qg.js","./index-UsPtaxTh.js","./SearchOutlined-BUONfEHJ.js","./useBreakpoint-CUrvcDr2.js","./Pagination-CIrtJa5e.js","./index-7X6rB-D6.js","./index-BMF_2O9_.js","./index-DD15UiBp.js","./row-B1CxNhq6.js","./index-BJjUIN-g.js","./col-pZhDRk6E.js","./index-BwkmqrWl.js","./index-DFDl0PJq.js","./index-DrhEInvH.js"])))=>i.map(i=>d[i]);
import{bf as e,r as t,b3 as i,b4 as n,b8 as s,bn as o,bl as a,aQ as l,bm as r}from"./index-BoH2j3cU.js";import{PrivacyScope as c,PrivacyScopeName as d,getGroupPosts as h,getPosts as v,deletePost as u,trashPost as g,setPostPrivacy as m,unTagPost as p,findAllPostsOf as x,findFirstPost as y}from"./posts-DhPOCJyC.js";import{d as f}from"./dayjs.min-BtTaSKBf.js";import{u as j,d as b,a as P,z as k,t as T,v as C,aI as w,S as F,I as _,i as S,h as I,s as D,B as R,c as N,l as L,e as O,f as B,b as M,g as U,T as W,j as E,W as A,k as V}from"./MyApp-D93h0aQZ.js";import q from"./useCacheState-CRWoF5gI.js";import G from"./MyTable-B-PXqHUM.js";import{E as z}from"./ExportButton-bON9fXxS.js";import{postIdFromBase64Id as H,getPostIdFromUrl as K,getUidFromUrl as X}from"./getIds-CXkkWBEB.js";import{checkVIP as $}from"./useVIP-f__zpoad.js";import{u as Q}from"./useAction-B53X_KY4.js";import{B as Y}from"./BadgeWrapper-D2jAMD-I.js";import{u as J}from"./useDevMode-BCrlvjeP.js";import{S as Z}from"./Screen-BEv7M6xj.js";import{R as ee,g as te}from"./reactions-CXN7tjxZ.js";import{A as ie}from"./index-BMF_2O9_.js";import{C as ne}from"./index-CCn4Ygtp.js";import{S as se}from"./index-CTitp5Qg.js";import{P as oe}from"./index-DD15UiBp.js";import{I as ae}from"./index-7X6rB-D6.js";import{D as le}from"./index-B0u8UCO0.js";import{T as re}from"./index-DFDl0PJq.js";import{R as ce}from"./row-B1CxNhq6.js";import{M as de}from"./index-DZ4ORVOX.js";import"./videos-CoQTeQLu.js";import"./index-CLQrWQaN.js";import"./Table-CSd7eQib.js";import"./List-BGWr2xJE.js";import"./DownOutlined-DRGhK8zp.js";import"./index-BaNQURuW.js";import"./index-BS-7HFpi.js";import"./index-p3GZU5lJ.js";import"./index-DWB43XHw.js";import"./Dropdown-C4ZC00F-.js";import"./PurePanel-DNUOZ5MP.js";import"./move-DCq-oE7y.js";import"./useBreakpoint-CUrvcDr2.js";import"./Pagination-CIrtJa5e.js";import"./index-UsPtaxTh.js";import"./SearchOutlined-BUONfEHJ.js";import"./sweetalert2.esm.all-BZxvatOx.js";import"./index-IueWr_3q.js";import"./index-BwkmqrWl.js";import"./col-pZhDRk6E.js";import"./ClockCircleOutlined-CoSdOHop.js";const he=n((()=>l((()=>import("./VideoViewer-HdQ6aks3.js")),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),{fallback:V}),ve=n((()=>l((()=>import("./Media-iJ6K35w7.js").then((e=>e.M))),__vite__mapDeps([5,1,2,4,6,3,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]),import.meta.url)),{fallback:V}),ue=[c.EVERYONE,c.FRIENDS,c.FRIENDS_OF_FRIENDS,c.SELF],ge=new Set([c.EVERYONE,c.CUSTOM,c.FRIENDS_OF_FRIENDS]),me=Object.keys(c).filter((e=>!ge.has(e))),pe=e=>{var t,i,n,s;return L(e.title||e.summary||e.message||(null==(t=e.content)?void 0:t.text)||(null==(s=null==(n=null==(i=e.content)?void 0:i.attachments)?void 0:n.find((e=>e.title)))?void 0:s.title),30)||B(e.creation_time)};function xe({target:n}){var l,V;const{ti:ge}=j(),xe=e(),{message:ye,notification:fe}=b(),{devMode:je}=J(),{onClickAction:be,onClickBulkActions:Pe}=Q(),{profile:ke}=P(),Te=(null==n?void 0:n.id)||"",[Ce,we]=q("Posts.postFilters",{uid:"",privacy:c.ALL,omitPinnedPost:!1,beforeTime:null,taggedInOnly:!1,postedByOthers:null}),[Fe,_e]=q("Posts.autoLoadReactions",!1),[Se,Ie]=q("Posts.maxPosts."+Te,9),[De,Re]=q("Posts.uid."+Te,Te),[Ne,Le]=q("Posts.profile."+Te,n),[Oe,Be]=q("Posts.posts."+Te,[]),[Me,Ue]=q("Posts.reactions."+Te,{}),[We,Ee]=q("Posts.loading."+Te,!1),[Ae,Ve]=q("Posts.loadingFirstPost."+Te,!1),[qe,Ge]=q("Posts.loadingReactions."+Te,!1),[ze,He]=t.useState(null),Ke=(null==Ne?void 0:Ne.type)===k.Group,Xe=t.useMemo((()=>Oe.filter(Boolean).map(((e,t)=>{var i,n;return{...e,recent:t,reactions:Me[e.id]||null,totalReact:(null==(n=null==(i=Me[e.id])?void 0:i.reduce)?void 0:n.call(i,((e,t)=>e+t.count),0))||0}}))),[Oe,Me]);t.useEffect((()=>{T("Posts:onLoad")}),[]),t.useEffect((()=>{n&&n.id!==De&&(Re(n.id),setTimeout((()=>{Qe(n.id)}),1e3))}),[n,De]);const $e=async(e="",t="")=>{const i=e||De||Ce.uid;return Ke?await h({groupId:i,cursor:t}):await v({...Ce,uid:i,cursor:t})},Qe=async(e,t=!1)=>{var n,s;const o=t?"Posts:onClickLoadMore":"Posts:onClickReload";T(o),Ee(!0),ye.loading({key:o,content:ge({en:"Fetching posts...",vi:"Đang tải bài viết..."}),duration:0});const a=t?[...Oe]:[];let l=(null==(n=a[a.length-1])?void 0:n.cursor)||"",r=!1,c=0;for(;c<Se&&!r;){const t=await $e(e,l);if(!(null==t?void 0:t.length))break;c+=t.length,a.push(...t),console.log(a),ye.loading({key:o,content:i.jsxs(i.Fragment,{children:[ge({en:"Fetching posts...",vi:"Đang tải bài viết..."})+c+"/"+Se,i.jsx("br",{}),ge({en:"Click to stop",vi:"Bấm để dừng"})]}),onClick:()=>r=!0,duration:0}),Be([...a]),l=null==(s=a[a.length-1])?void 0:s.cursor,Fe&&await Ze(t,!1,!1),await C(1e3)}0===a.length?ye.info({key:o,content:ge({en:"Posts not found",vi:"Không tìm thấy bài viết nào"})}):ye.success({key:o,content:t?ge({en:"Load more posts success: ",vi:"Tải thêm thành công: "})+c:ge({en:"Fetch posts success: ",vi:"Tải bài viết thành công: "})+a.length}),Ee(!1)},Ye=async()=>{if(!(await $()))return;const e="Posts:onClickFindFirstPost";T(e),Ve(!0),ye.loading({key:e,content:ge({en:"Finding first post...",vi:"Tìm bài viết đầu tiên..."}),duration:0});let t=r,i=Date.now();Be([]);const n=await y({uid:De||Ce.uid||"",startTime:t,endTime:i,progress:(t,i)=>{console.log(t,i),ye.loading({key:e,content:ge({en:"Finding first post...",vi:"Tìm bài viết đầu tiên..."})+B(t),duration:0}),(null==i?void 0:i.length)&&Be((e=>{const t=new Set(e.map((e=>e.id)));return[...i.filter((e=>!t.has(e.id))),...e].sort(((e,t)=>t.creation_time-e.creation_time))}))}});n?(ye.destroy(e),fe.open({key:e,type:"success",message:ge({en:"Find first post done: ",vi:"Tìm bài viết đầu tiên xong: "})+B(n.creation_time),description:n.url})):ye.info({key:e,content:ge({en:"First post not found",vi:"Không tìm thấy bài viết đầu tiên"})}),Ve(!1),console.log(n)},Je=async(e,t=!1)=>{const i=pe(e);return be({key:"Posts:onLoadReactions",id:e.id,record:e,actionFn:async()=>{try{const t=e.post_id||H(e.id)||await K(e.url),i=await te(t);return Ue((t=>({...t,[e.id]:i}))),!0}catch(t){return console.error(t),!1}},loadingText:()=>ge({en:"Loading reactions..",vi:"Đang tải lượt thích.."})+i,successText:()=>ge({en:"Reactions loaded: ",vi:"Tải lượt thích thành công: "})+i,failedText:()=>ge({en:"Reactions load failed: ",vi:"Không tải được lượt thích: "})+i,onSuccess:()=>{},needConfirm:t,confirmProps:{title:ge({en:"Load reactions?",vi:"Tải lượt thích?"}),text:i}})},Ze=async(e,t=!0,i=!0)=>(Ge(!0),Pe({data:e,key:"Posts:onLoadReactionsBulk",actionFn:Je,loadingText:e=>ge({en:"Loading reactions...",vi:"Đang tải lượt thích..."}),successText:e=>ge({en:"Loaded reactions",vi:"Hoàn tất tải lượt thích"}),successDescItem:e=>pe(e),needConfirm:t,showSuccessNoti:i,confirmProps:{title:ge({en:"Load reactions of "+e.length+" posts?",vi:"Tải lượt thích của "+e.length+" bài viết?"}),text:ge({en:"Warning: This action will call api for each post. Please only select posts you want to load reactions. To reduce the chance of being banned by fb, please spread the posts to load reactions.",vi:"Lưu ý: Sẽ gọi api cho từng bài viết. Vui lòng chỉ chọn bài muốn tải lượt thích. Để giảm tỷ lệ bị fb ban"})}}).finally((()=>{Ge(!1)}))),et=async(e,t=!1)=>{const i=pe(e);return be({key:"Posts:onDeletePost",id:e.id,record:e,actionFn:()=>je?C(1e3):u(e.story_id),loadingText:()=>ge({en:"Deleting post..",vi:"Đang xoá bài viết.."})+i,successText:()=>ge({en:"Post deleted: ",vi:"Xoá bài viết thành công: "})+i,failedText:()=>ge({en:"Post not deleted: ",vi:"Không xoá được bài viết: "})+i,onSuccess:()=>{Be((t=>a(t,(t=>{const i=t.find((t=>t.story_id===e.story_id));i&&(i.deleted=!0)}))))},needConfirm:t,confirmProps:{title:ge({en:"Delete post?",vi:"Xoá bài viết?"}),text:i}})},tt=async(e,t=!1)=>{const i=pe(e);return be({key:"Posts:onTrashPost",id:e.id,record:e,actionFn:()=>je?C(1e3):g(e.story_id),loadingText:()=>ge({en:"Moving post to trash..",vi:"Đang chuyển bài viết vào thùng rác.."})+i,successText:()=>ge({en:"Post trashed: ",vi:"Chuyển bài viết vào thùng rác thành công: "})+i,failedText:()=>ge({en:"Post not trashed: ",vi:"Không chuyển được bài viết vào thùng rác: "})+i,onSuccess:()=>{Be((t=>a(t,(t=>{const i=t.find((t=>t.story_id===e.story_id));i&&(i.trashed=!0)}))))},needConfirm:t,confirmProps:{title:ge({en:"Move post to trash? (Delete after 30 days)",vi:"Chuyển vào thùng rác? (Bị xoá sau 30 ngày)"}),text:i}})},it=async(e,t,i=!1)=>{const n=pe(e),s=ge(d[t]);return be({key:"Posts:onChangePostPrivacy",id:e.id,record:e,actionFn:()=>je?C(1e3):m({writeID:e.privacy.write_id,baseState:t}),loadingText:()=>ge({en:"Changing post privacy to "+s+"..",vi:"Đang sửa quyền riêng tư sang "+s+".."})+n,successText:()=>ge({en:"Change post privacy success "+s+": ",vi:"Sửa quyền riêng tư thành công "+s+": "})+n,failedText:()=>ge({en:"Change post privacy failed "+s+": ",vi:"Sửa quyền riêng tư lỗi "+s+": "})+n,onSuccess:()=>{Be((i=>a(i,(i=>{const n=i.find((t=>t.story_id===e.story_id));n&&(n.privacy.scope=t)}))))},needConfirm:i,confirmProps:{title:ge({en:"Change post privacy? ",vi:"Sửa quyền riêng tư? "}),text:s+"; "+n}})},nt=async(e,t=!1)=>{const i=pe(e);return be({key:"Posts:onUnTagPost",id:e.id,record:e,actionFn:()=>je?C(1e3):p(e.story_id),loadingText:()=>ge({en:"Untagging post..",vi:"Đang gỡ thẻ bài viết.."})+i,successText:()=>ge({en:"Post untagged: ",vi:"Gỡ thẻ bài viết thành công: "})+i,failedText:()=>ge({en:"Post not untagged: ",vi:"Không gỡ được thẻ bài viết: "})+i,onSuccess:()=>{Be((t=>a(t,(t=>{const i=t.find((t=>t.story_id===e.story_id));i&&(i.untagged=!0)}))))},needConfirm:t,confirmProps:{title:ge({en:"Untag post?",vi:"Gỡ thẻ bài viết?"}),text:i}})},st=[{title:"#",key:"recent",dataIndex:"recent",sorter:(e,t)=>e.recent-t.recent,render:(e,t,i)=>t.recent+1,width:70,align:"center"},{title:ge({en:"Actor",vi:"Người đăng"}),key:"actor",dataIndex:"actor",onSearch:(e,t,i)=>{var n,s;return D(e,(null==(n=null==i?void 0:i.actor)?void 0:n.name)+(null==(s=null==i?void 0:i.actor)?void 0:s.id))},render:(e,t,n)=>{var s,o,a,l,r,c;return i.jsxs(F,{style:{maxWidth:300},children:[i.jsx(ie,{shape:"square",src:i.jsx(_,{src:S(null==(s=t.actor)?void 0:s.id),fallback:null==(o=t.actor)?void 0:o.avatar}),size:50}),i.jsxs(F,{direction:"vertical",size:0,children:[i.jsx("a",{href:(null==(a=t.actor)?void 0:a.url)||I(null==(l=t.actor)?void 0:l.id),target:"_blank",children:i.jsx("b",{children:null==(r=t.actor)?void 0:r.name})}),i.jsx("span",{style:{opacity:.5},children:null==(c=t.actor)?void 0:c.id})]})]})},filters:w(Xe.map((e=>e.actor)),"name"),onFilter:(e,t)=>{var i;return(null==(i=t.actor)?void 0:i.name)==e},width:250},{title:ge({en:"Media",vi:"Ảnh/Video"}),key:"media",dataIndex:"media",render:(e,t,n)=>{var s,o;const a=null==(s=t.content)?void 0:s.attachments;if((null==a?void 0:a.length)>0){const e=(null==(o=null==a?void 0:a[0])?void 0:o.total_count)||(null==a?void 0:a.length),n=1===e,s=1===e&&"Video"===a[0].type;return i.jsx(R.Ribbon,{text:s?i.jsx("i",{className:"fa-solid fa-video"}):e>1?e:null,style:{display:s||e>1?"block":"none"},children:i.jsx(_,{src:a[0].thumbnail,style:{objectFit:"cover",height:150,width:210,borderRadius:10},preview:!(!n||s)||{destroyOnClose:!0,imageRender:()=>s?i.jsx(he,{info:{id:a[0].id}}):i.jsx(ne,{style:{maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden",borderRadius:10},children:i.jsx(ve,{target:t.actor,postId:t.id})}),toolbarRender:()=>null}})})}return"-"},filters:[{text:ge({en:"Video",vi:"Video"}),value:"video"},{text:ge({en:"Has media",vi:"Có ảnh hoặc video"}),value:"has-media"},{text:ge({en:"Multi media",vi:"Nhiều ảnh/video"}),value:"multi-media"}],onFilter:(e,t)=>{var i,n,s,o,a,l,r,c,d;return"video"===e?1===(null==(n=null==(i=t.content)?void 0:i.attachments)?void 0:n.length)&&"Video"===(null==(a=null==(o=null==(s=t.content)?void 0:s.attachments)?void 0:o[0])?void 0:a.type):"has-media"===e?(null==(r=null==(l=t.content)?void 0:l.attachments)?void 0:r.length)>0:"multi-media"===e?(null==(d=null==(c=t.content)?void 0:c.attachments)?void 0:d.length)>1:void 0},width:200,align:"right"},{title:ge({en:"Content",vi:"Nội dung"}),key:"content",dataIndex:"content",onSearch:(e,t,i)=>{var n;return[null==(n=i.content)?void 0:n.text,i.message,i.title,i.summary].filter(Boolean).some((t=>D(e,t)))},render:(e,t,n)=>{var s,o,a,l,r,c;const d=(null==(s=t.content)?void 0:s.text)||(null==(l=null==(a=null==(o=t.content)?void 0:o.attachments)?void 0:a.find((e=>e.title)))?void 0:l.title);return i.jsxs(F,{direction:"vertical",style:{maxWidth:400},children:[t.is_pinned&&i.jsx(R,{count:ge({en:"Pinned post",vi:"Bài viết Đã ghim"}),color:"green"}),(null==(r=t.summary)?void 0:r.length)>0&&i.jsx(N.Text,{style:{fontStyle:"italic"},type:"secondary",children:L(t.summary,150)}),(null==(c=t.message)?void 0:c.length)>0&&i.jsx(N.Text,{children:L(t.message,150)}),i.jsx(N.Text,{type:"secondary",children:L(d,150)})]})},width:"auto"},{title:ge({en:"Posted time",vi:"Đăng lúc"}),key:"date",dataIndex:"date",sorter:(e,t)=>e.creation_time-t.creation_time,render:(e,t,n)=>i.jsxs(F,{direction:"vertical",size:0,children:[i.jsxs(N.Text,{children:[O(t.creation_time)," ",ge({en:" ago",vi:"trước"})]}),i.jsx(N.Text,{type:"secondary",children:B(t.creation_time)})]})},{title:ge({en:"Privacy",vi:"Quyền riêng tư"}),key:"privacy",dataIndex:"privacy",render:(e,t,n)=>{var s;if(t.deleted)return i.jsx(M,{color:"red",children:ge({en:"Deleted",vi:"Đã xoá"})});const{scope:o,description:a,allow:l,deny:r}=t.privacy||{};return i.jsxs(F,{direction:"vertical",size:0,children:[(null==(s=t.privacy)?void 0:s.can_edit)?i.jsx(se,{value:o,options:ue.map((e=>({value:e,label:ge(d[e])}))),onSelect:e=>{console.log(e),it(t,e,!0)},popupMatchSelectWidth:!1}):i.jsx(N.Text,{children:ge(d[o])}),a&&((null==l?void 0:l.length)>0||(null==r?void 0:r.length)>0)&&i.jsx(N.Text,{type:"secondary",children:a})]})},filters:Object.keys(c).map((e=>({text:ge(d[e])+" ("+Xe.filter((t=>t.privacy.scope===e)).length+")",value:e}))),onFilter:(e,t)=>t.privacy.scope===e,width:150},{title:ge({en:"React",vi:"Thích"}),key:"reactions",dataIndex:"reactions",render:(e,t,n)=>{const s=t.reactions;if(!s)return"-";const o=s.reduce(((e,t)=>e+t.count),0);return i.jsxs(F,{size:3,direction:"vertical",children:[i.jsx(M,{color:o>0?"success":"default",children:U(o)}),s.map((e=>i.jsxs(F,{size:2,children:[i.jsx(_,{preview:!1,src:ee[e.reactionId].icon,width:20,height:20})," ",U(e.count)]},e.reactionId)))]})},rangeFilter:{getValue:e=>e.totalReact},sorter:(e,t)=>e.totalReact-t.totalReact,width:100},{title:ge({en:"Action",vi:"Hành động"}),key:"action",dataIndex:"action",render:(e,t,n)=>{var a;return i.jsxs(F,{size:3,wrap:!0,style:{maxWidth:200},children:[!t.deleted&&i.jsx(W,{title:ge({en:"View detail",vi:"Xem chi tiết"}),children:i.jsx(s,{type:"primary",onClick:()=>{He(t)},icon:i.jsx("i",{className:"fa-solid fa-info"})})}),i.jsx(W,{title:ge({en:"Load reactions",vi:"Tải lượt thích"}),children:i.jsx(s,{icon:i.jsx("i",{className:"fa-solid fa-thumbs-up"}),onClick:()=>Je(t,!0)})}),t.can_delete&&!t.deleted&&i.jsxs(i.Fragment,{children:[i.jsx(W,{title:ge({en:"Delete permanently",vi:"Xoá vĩnh viễn"}),children:i.jsx(s,{danger:!0,icon:i.jsx("i",{className:"fa-solid fa-trash"}),onClick:()=>et(t,!0)})}),!t.trashed&&i.jsx(W,{title:ge({en:"Move to trash",vi:"Chuyển vào thùng rác"}),children:i.jsx(s,{icon:i.jsx("i",{className:"fa-solid fa-eye-slash"}),onClick:()=>tt(t,!0)})})]}),!t.can_delete&&(null==ke?void 0:ke.id)==De&&De!==(null==(a=t.actor)?void 0:a.id)&&i.jsx(W,{title:t.untagged?ge({en:"Tag removed",vi:"Đã gỡ thẻ"}):ge({en:"Remove tag",vi:"Gỡ thẻ"}),children:i.jsx(s,{danger:!t.untagged,disabled:t.untagged,icon:i.jsx("i",{className:"fa-solid fa-user-tag"}),onClick:()=>nt(t,!0)})}),!t.deleted&&i.jsx(W,{title:ge({en:"Open in Bulk downloader",vi:"Mở trong Tải hàng loạt"}),children:i.jsx(s,{onClick:()=>{xe("/bulk-downloader",{state:{targetId:t.url,platform:o.FacebookPost}})},icon:i.jsx("i",{className:"fa-solid fa-download"})})}),!t.deleted&&i.jsx(W,{title:ge({en:"View on Facebook",vi:"Xem bài viết"}),children:i.jsx(s,{href:t.trashed?"https://www.facebook.com/me/allactivity/?category_key=TRASH":t.url,target:"_blank",icon:i.jsx("i",{className:"fa-solid fa-up-right-from-square"})})})]})},width:150}],ot=i.jsx(W,{title:ge({en:"Load older posts. Use filters above",vi:"Tải thêm bài viết cũ hơn. Sử dụng các bộ lọc trên"}),children:i.jsx(s,{loading:We,icon:i.jsx("i",{className:"fa-solid fa-play"}),onClick:()=>Qe(null,!0),children:ge(We?{en:"Loading..",vi:"Đang tải.."}:{en:"Load more",vi:"Tải thêm"})})});return i.jsxs(Z,{title:ge({en:"Posts manager",vi:"Quản lý bài viết"}),titleSuffix:i.jsx(M,{color:"error",style:{marginLeft:10},children:ge({en:"🚧 Work in progress",vi:"🚧 Đang phát triển"})}),children:[i.jsxs(F.Compact,{style:{maxWidth:"90vw",marginBottom:10,overflow:"auto"},children:[i.jsx(oe,{title:(null==(V=null==(l=null==Ne?void 0:Ne.type)?void 0:l.toUpperCase)?void 0:V.call(l))||"User/Page/Group",content:Ne?i.jsxs(F,{children:[i.jsx(ie,{shape:"square",src:i.jsx(_,{src:Ne.avatar}),size:50}),i.jsx("a",{href:Ne.url,target:"_blank",children:i.jsx("b",{children:Ne.name})})]}):null,children:i.jsx(ae,{placeholder:ge({en:"UID/URL",vi:"UID/URL"}),value:De,onChange:async e=>{const t=e.target.value;if(Re(t),""==t.trim())return;T("Posts:onChangeUid:"+t);const i="Posts:onChangeUid";ye.loading({key:i,content:ge({en:"Finding UID..",vi:"Đang tìm UID.."}),duration:0});const n=/^\d+$/.test(t)?t:await X(t);ye.loading({key:i,content:ge({en:"Finding Profile..",vi:"Đang tìm Profile.."}),duration:0});const s=await E(n);Re(n),Le(s),n?ye.success({key:i,content:ge({en:"UID found: ",vi:"Tìm thấy UID: "})+n+" - "+(null==s?void 0:s.name)}):ye.error({key:i,content:ge({en:"UID not found",vi:"Không tìm thấy UID"})})},style:{minWidth:100,maxWidth:150},prefix:i.jsx("i",{className:"fa-solid fa-user"})})}),i.jsx(W,{title:ge({en:"Posted before time",vi:"Đăng trước ngày"}),children:i.jsx(le,{value:Ce.beforeTime?f(Ce.beforeTime):null,onChange:(e,t)=>{T("Posts:onChangeTime"),we((e=>a(e,(e=>{const i=Array.isArray(t)?t[0]:t;e.beforeTime=new Date(i).getTime(),console.log(t,e.beforeTime)}))))},maxDate:f(new Date),disabled:Ke,style:{minWidth:100,maxWidth:150},placeholder:ge({en:"Before time",vi:"Trước ngày"})})}),i.jsx(W,{title:ge({en:"Posted by",vi:"Đăng bởi"}),children:i.jsxs(se,{style:{minWidth:120},value:Ce.postedByOthers,onChange:e=>{T("Posts:onChangePostedBy:"+e),we((t=>a(t,(t=>{t.postedByOthers=e}))))},disabled:Ke,popupMatchSelectWidth:!1,children:[i.jsx(se.Option,{value:null,children:ge({en:"Anyone",vi:"Bất kỳ ai"})}),i.jsxs(se.Option,{value:!1,children:["📌 ",ge({en:"Owner",vi:"Chính chủ"})]}),i.jsxs(se.Option,{value:!0,children:["👤 ",ge({en:"Others",vi:"Người khác"})]})]})}),i.jsx(W,{title:ge({en:"Privacy",vi:"Quyền riêng tư"}),children:i.jsx(se,{style:{minWidth:120},value:Ce.privacy,onChange:e=>{T("Posts:onChangePrivacy:"+e),we((t=>a(t,(t=>{t.privacy=e}))))},disabled:Ke,popupMatchSelectWidth:!1,children:me.map((e=>i.jsx(se.Option,{value:e,children:ge(d[e])},e)))})}),i.jsx(W,{title:ge({en:"Tagged only",vi:"Chỉ bài viết được gắn thẻ"}),children:i.jsx(s,{icon:i.jsx("i",{className:"fa-solid fa-user-tag"}),type:Ce.taggedInOnly?"primary":"default",onClick:()=>{T("Posts:onToggleTaggedOnly"),we((e=>a(e,(e=>{e.taggedInOnly=!e.taggedInOnly}))))},disabled:Ke,children:ge({en:"Tagged only",vi:"Gắn thẻ"})})}),i.jsx(W,{title:ge({en:"Ignore pinned post",vi:"Bỏ qua bài viết đã ghim"}),children:i.jsx(s,{icon:i.jsx("i",{className:"fa-solid fa-thumbtack"}),type:Ce.omitPinnedPost?"primary":"default",onClick:()=>{T("Posts:onTogglePinnedPost"),we((e=>a(e,(e=>{e.omitPinnedPost=!e.omitPinnedPost}))))},disabled:Ke,children:ge({en:"Pinned",vi:"Đã ghim"})})}),i.jsx(W,{title:ge({en:"Auto load reactions for each post",vi:"Tự động tải lượt thích cho từng bài viết"}),children:i.jsx(s,{icon:i.jsx("i",{className:"fa-solid fa-thumbs-up"}),type:Fe?"primary":"default",onClick:async()=>{(Fe||await $())&&_e((e=>!e))},children:ge({en:"Reactions",vi:"Lượt thích"})})}),i.jsx(W,{title:ge({en:"Max posts to load",vi:"Số bài viết tối đa muốn tải"}),children:i.jsx(re,{placeholder:ge({en:"Max posts",vi:"Số bài viết tối đa"}),value:Se,onChange:e=>Ie(Math.max(e||0,1)),style:{minWidth:50,maxWidth:100}})}),i.jsx(s,{type:"primary",onClick:()=>Qe(),icon:i.jsx("i",{className:"fa-solid fa-filter"}),loading:We,children:ge({en:"Apply",vi:"Lọc"})})]}),i.jsx(G,{data:Xe,columns:st,searchable:!0,selectable:!0,keyExtractor:e=>e.id,renderTitle:e=>{var t;const n=(null==e?void 0:e.length)?e:Xe,o=n.filter((e=>e.can_delete&&!e.deleted)),a=n.filter((e=>e.can_delete&&!e.trashed&&!e.deleted)),l=n.filter((e=>{var t;return(null==(t=e.privacy)?void 0:t.can_edit)&&!e.deleted})),r=n.filter((e=>!Me[e.id])),c=n.filter((e=>{var t;return!e.can_delete&&(null==ke?void 0:ke.id)==De&&De!==(null==(t=e.actor)?void 0:t.id)&&!e.untagged}));return i.jsxs(i.Fragment,{children:[i.jsxs(F.Compact,{children:[i.jsx(z,{data:e.length?e:Xe,options:[{key:"json",label:".json",prepareData:e=>({fileName:"posts.json",data:JSON.stringify(e,null,4)})}]}),ot]}),i.jsxs(F.Compact,{children:[i.jsx(Y,{type:"hot",children:i.jsx(W,{title:ge({en:"Find first posts",vi:"Tìm bài viết đầu tiên"}),children:i.jsx(s,{loading:Ae,icon:i.jsx("i",{className:"fa-solid fa-clock-rotate-left"}),onClick:Ye,disabled:Ke,children:ge({en:"First posts",vi:"Bài đầu tiên"})})})}),i.jsx(W,{title:ge({en:"Search posts on Facebook (Fanpage/Group/User)",vi:"Tìm tất cả bài viết trên Facebook (Fanpage/Group/User)"}),children:i.jsx(s,{icon:i.jsx("i",{className:"fa-solid fa-arrow-up-right-from-square"}),onClick:async()=>{T("Posts:FindAllPosts"),x(De||Ce.uid||await A()||"")},children:ge({en:"All posts",vi:"Tìm bài viết"})})})]}),i.jsxs(F.Compact,{children:[r.length>0&&i.jsx(Y,{type:"new",children:i.jsx(W,{title:ge({en:"Load post reactions of "+r.length+" posts",vi:"Tải lượt thích của "+r.length+" bài viết"}),children:i.jsxs(s,{loading:qe,icon:i.jsx("i",{className:"fa-solid fa-thumbs-up"}),onClick:()=>Ze(r),children:[ge({en:"Reactions ",vi:"Thích "}),r.length]})})}),o.length>0&&i.jsx(W,{title:ge({en:`Delete permanently ${o.length} posts`,vi:`Xoá vĩnh viễn ${o.length} bài viết`}),children:i.jsxs(s,{danger:!0,icon:i.jsx("i",{className:"fa-solid fa-trash"}),onClick:()=>(async e=>Pe({data:e,key:"Posts:onDeleteBulk",actionFn:et,loadingText:e=>ge({en:"Deleting post...",vi:"Đang xoá bài viết..."}),successText:e=>ge({en:"Deleted posts",vi:"Hoàn tất xoá bài viết"}),successDescItem:e=>pe(e),confirmProps:{title:ge({en:"Delete "+e.length+" posts?",vi:"Xoá "+e.length+" bài viết?"}),text:ge({en:"Warning: Cannot undo",vi:"Lưu ý: Không thể hoàn tác."})}}))(o),children:[ge({en:"Delete",vi:"Xoá"})," ",o.length]})}),a.length>0&&i.jsx(W,{title:ge({en:`Move to trash ${a.length} posts`,vi:`Chuyển vào thùng rác ${a.length} bài viết`}),children:i.jsxs(s,{icon:i.jsx("i",{className:"fa-solid fa-eye-slash"}),onClick:()=>(async e=>Pe({data:e,key:"Posts:onTrashBulk",actionFn:tt,loadingText:e=>ge({en:"Moving to trash...",vi:"Đang chuyển vào thùng rác..."}),successText:e=>ge({en:"Trashed posts",vi:"Hoàn tất chuyển vào thùng rác"}),successDescItem:e=>pe(e),confirmProps:{title:ge({en:"Move to trash "+e.length+" posts?",vi:"Chuyển vào thùng rác "+e.length+" bài viết?"}),text:ge({en:"Warning: Will be deleted after 30 days",vi:"Lưu ý: Sẽ bị xoá sau 30 ngày"})}}))(a),children:[ge({en:"Trash",vi:"Rác"})," ",a.length]})}),l.length>0&&i.jsx(W,{title:ge({en:"Change privacy "+l.length+" posts",vi:"Sửa quyền riêng tư "+l.length+" bài viết"}),children:i.jsx(se,{value:null==(t=l[0].privacy)?void 0:t.scope,options:ue.map((e=>({value:e,label:ge(d[e])}))),onSelect:e=>{(async(e,t)=>{const i=ge(d[t]);Pe({data:e,key:"Posts:onChangePrivacyBulk",actionFn:e=>t===e.privacy.scope||it(e,t),loadingText:e=>ge({en:"Changing post privacy...",vi:"Đang sửa quyền riêng tư..."})+i,successText:e=>ge({en:"Chaged posts privacy: ",vi:"Hoàn tất sửa quyền riêng tư: "})+i,successDescItem:e=>pe(e)+": "+I(e.id),confirmProps:{title:ge({en:"Changed privacy "+e.length+" posts?",vi:"Sửa quyền riêng tư "+e.length+" bài viết?"}),text:i}})})(l,e)},popupMatchSelectWidth:!1})}),c.length>0&&i.jsx(W,{title:ge({en:"Untag "+c.length+" posts",vi:"Gỡ thẻ "+c.length+" bài viết"}),children:i.jsxs(s,{danger:!0,icon:i.jsx("i",{className:"fa-solid fa-user-tag"}),onClick:()=>(async e=>Pe({data:e,key:"Posts:onUntagBulk",actionFn:nt,loadingText:e=>ge({en:"Untagging posts...",vi:"Đang gỡ thẻ bài viết..."}),successText:e=>ge({en:"Untagged posts",vi:"Hoàn tất gỡ thẻ bài viết"}),successDescItem:e=>pe(e),confirmProps:{title:ge({en:"Untag "+e.length+" posts?",vi:"Gỡ thẻ "+e.length+" bài viết?"}),text:ge({en:"Warning: Cannot undo",vi:"Lưu ý: Không thể hoàn tác."})}}))(c),children:[ge({en:"Untag",vi:"Gỡ thẻ"})," ",c.length]})})]})]})},footer:i.jsx(ce,{align:"middle",justify:"center",style:{width:"100%"},children:ot})}),i.jsx(de,{open:!!ze,onCancel:()=>He(null),footer:null,width:"90vw",children:ze&&i.jsx(ve,{target:ze.actor,postId:ze.id})})]})}export{xe as default};
