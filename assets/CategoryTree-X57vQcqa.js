import{r as e,b3 as n}from"./index-BoH2j3cU.js";import{C as t,a as r,b as o}from"./index-YNCu78Hq.js";import{u as i,s as c}from"./MyApp-D93h0aQZ.js";import{u as s}from"./index-CLQrWQaN.js";import{I as l}from"./index-7X6rB-D6.js";import{T as a}from"./index-BaNQURuW.js";import"./Screen-BEv7M6xj.js";import"./col-pZhDRk6E.js";import"./row-B1CxNhq6.js";import"./useBreakpoint-CUrvcDr2.js";import"./SearchOutlined-BUONfEHJ.js";import"./List-BGWr2xJE.js";import"./index-BS-7HFpi.js";function d({onCategorySelect:d}){const{ti:u,language:m}=i(),[j,x]=e.useState(""),[y,g]=e.useState([]),[k,b]=e.useState(!0),[v,S]=e.useState([]),w=e.useMemo((()=>{const e=p(r,u);if(!j)return e;const t=e=>e.map((e=>{const r={...e};if("string"==typeof e.title){const t=c(j,e.title);r.title=t?n.jsx("span",{style:h,children:e.title}):e.title}return e.children&&e.children.length>0&&(r.children=t(e.children)),r}));return t(e)}),[m,j]),C=(e,n)=>{const{node:r,checked:o}=n;if(!o)return d(null),void S([]);const i=r.key;if(i&&i in t){const e=[];e.push(i),d(i);const n=f(r.children);e.push(...n),S(e)}},E=s((e=>{if(x(e),!e)return g([]),void b(!1);const n=[],t=(r,i=[])=>{r.forEach((r=>{const s=o[r.key]||r.key;c(e,u(s))&&n.push(...i),r.children&&r.children.length>0&&t(r.children,[...i,r.key])}))};t(w),g([...new Set(n)]),b(!0)}),500);return n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx(l.Search,{style:{marginBottom:8},placeholder:u({en:"Search categories",vi:"Tìm kiếm danh mục"}),onChange:e=>E(e.target.value),allowClear:!0}),n.jsx(a.DirectoryTree,{showIcon:!0,style:{width:"100%"},className:"custom-directory-tree",checkedKeys:v,expandedKeys:y,autoExpandParent:k,onCheck:C,onSelect:(e,n)=>{n.node.hasChildren||C(0,{node:n.node,checked:!n.node.checked})},onExpand:e=>{g(e),b(!1)},treeData:w,filterTreeNode:e=>!j||c(j,e.title),showLine:{showLeafIcon:!1},switcherIcon:e=>n.jsx("i",{className:e.expanded?"fa-solid fa-chevron-down":"fa-solid fa-chevron-right"}),checkable:!0})]})}const h={backgroundColor:"#ffd591",padding:"0 4px",borderRadius:"2px",color:"#000"},u=e=>{var n;return(null==(n=o[e])?void 0:n.icon)||"fa-solid fa-folder"},p=(e,n)=>{if(!e)return[];const t=[];return e.children&&Object.entries(e.children).forEach((([e,r])=>{const o=m(r,e,n);o&&t.push(o)})),t},m=(e,r,i)=>{var c;const s=Object.hasOwn(t,r),l={title:i(e.name||o[r]||r),key:r,selectable:s,checkable:s,children:[],icon:n.jsx("i",{className:(null==(c=e.name)?void 0:c.icon)||u(r)}),hasChildren:e.children&&Object.keys(e.children).length>0};return e.children&&Object.keys(e.children).length>0&&Object.entries(e.children).forEach((([e,n])=>{const t=m(n,e,i);t&&l.children.push(t)})),0!==l.children.length||s||"children"===r?l:null},f=e=>{let n=[];return e.forEach((e=>{e.children&&e.children.length>0?n=[...n,...f(e.children)]:e.checkable&&n.push(e.key)})),n};export{d as default};
