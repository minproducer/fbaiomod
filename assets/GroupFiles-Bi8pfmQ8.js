import{r as o,b3 as i}from"./index-BoH2j3cU.js";import n from"./Collection-CEHJdMiC.js";import{y as l,x as e,u as r,S as d,T as t,B as a,I as s,c as u,s as c}from"./MyApp-D93h0aQZ.js";import{L as m}from"./index-BJjUIN-g.js";import"./index-CLQrWQaN.js";import"./useCacheState-CRWoF5gI.js";import"./react-hotkeys-hook.esm-V0Xz-7zA.js";import"./index-DD15UiBp.js";import"./index-p3GZU5lJ.js";import"./index-BS-7HFpi.js";import"./index-DWB43XHw.js";import"./Dropdown-C4ZC00F-.js";import"./PurePanel-DNUOZ5MP.js";import"./move-DCq-oE7y.js";import"./index-7X6rB-D6.js";import"./SearchOutlined-BUONfEHJ.js";import"./row-B1CxNhq6.js";import"./useBreakpoint-CUrvcDr2.js";import"./index-BwkmqrWl.js";import"./index-CTitp5Qg.js";import"./List-BGWr2xJE.js";import"./index-UsPtaxTh.js";import"./DownOutlined-DRGhK8zp.js";import"./Pagination-CIrtJa5e.js";import"./col-pZhDRk6E.js";function p({target:p}){const{ti:v}=r(),j=o.useCallback((async(o=[],i)=>{if(!(null==p?void 0:p.id)||!(null==p?void 0:p.type))return;const n=null==o?void 0:o[(null==o?void 0:o.length)-1];return await async function({groupId:o="",cursor:i=""}){var n,r;const d=await l({fb_api_req_friendly_name:"GroupsCometFilesTabPaginationQuery",variables:{count:15,cursor:i,groupDocsFileName:null,groupID:o,orderby:"TIME_DESC",scale:1,id:o},doc_id:"24326962373618252"}),t=e(d),{edges:a=[],page_info:s={}}=(null==(r=null==(n=null==t?void 0:t.data)?void 0:n.node)?void 0:r.group_docs_and_files)||{};return a.map((o=>{var i,n,l,e,r,d,t,a,u,c,m;return{download_url:null==(i=null==o?void 0:o.node)?void 0:i.download_url,name:null==(n=null==o?void 0:o.node)?void 0:n.name,post_url:null==(e=null==(l=null==o?void 0:o.node)?void 0:l.original_post)?void 0:e.url,creation_time:null==(d=null==(r=null==o?void 0:o.node)?void 0:r.original_post)?void 0:d.creation_time,icon:null==(a=null==(t=null==o?void 0:o.node)?void 0:t.icon)?void 0:a.uri,file_type:null==(u=null==o?void 0:o.node)?void 0:u.file_type,owners:null==(m=null==(c=null==o?void 0:o.node)?void 0:c.original_post)?void 0:m.actors.map((o=>({id:null==o?void 0:o.id,name:null==o?void 0:o.name,url:null==o?void 0:o.url}))),cursor:null==s?void 0:s.end_cursor}}))}({groupId:null==p?void 0:p.id,cursor:i||(null==n?void 0:n.cursor)||""})}),[p]),x=o.useCallback((o=>i.jsx(m.Item,{children:i.jsxs(d,{direction:"vertical",align:"center",style:{minWidth:150},children:[i.jsx(t,{title:o.download_url?v({en:"Download",vi:"Tải xuống"}):v({en:"No download link",vi:"Không có link tải"}),children:i.jsx(d,{style:{padding:"10px"},children:i.jsx(a.Ribbon,{text:i.jsx("i",{className:"fa fa-times"}),color:"red",style:{display:o.download_url?"none":"block"},children:i.jsx(s,{src:o.icon,alt:o.name,width:70,height:70,style:{objectFit:"cover",borderRadius:"10px",cursor:"pointer"},preview:!1,onClick:()=>o.download_url&&window.open(o.download_url)})})})}),i.jsx(t,{title:v({en:"View post",vi:"Xem bài viết"}),placement:"bottom",children:i.jsx(u.Paragraph,{style:{maxWidth:"150px",wordWrap:"break-word"},onClick:()=>window.open(o.post_url),children:o.name})})]})})),[]),_=o.useCallback((async o=>({url:o.download_url,name:o.name})),[]);return i.jsx(n,{collectionName:(null==p?void 0:p.name)+" - Files",fetchNext:j,renderItem:x,downloadItem:_,getItemCursor:o=>o.cursor||"",rowKey:o=>o.name+o.creation_time,onSearch:(o,i)=>c(o,i.name)})}export{p as default};
