import{y as o,x as i,aB as e,W as l}from"./MyApp-D93h0aQZ.js";import"./index-BoH2j3cU.js";async function n({groupId:e,cursor:l,search:n,statusFilter:d="ALL_STATUSES"}){var u,r;const a=await o({fb_api_req_friendly_name:"GroupsCometPeopleProfilesPaginatedListPaginationQuery",variables:{count:10,cursor:l,groupID:e,membershipType:"MEMBER",scale:1,search:n,statusStaticFilter:d,id:e},doc_id:"7804285152989966"}),t=i(a);console.log(t);const{edges:s=[],page_info:v={}}=(null==(r=null==(u=null==t?void 0:t.data)?void 0:u.node)?void 0:r.people_profiles)||{};return s.map((o=>{var i,e,l,n,d,u,r,a,t,s,_;const c=(null==(e=null==(i=null==o?void 0:o.membership)?void 0:i.meta_lines)?void 0:e.nodes)||[];return{id:null==(l=null==o?void 0:o.node)?void 0:l.id,name:null==(n=null==o?void 0:o.node)?void 0:n.name,avatar:null==(u=null==(d=null==o?void 0:o.node)?void 0:d.profile_picture)?void 0:u.uri,url:null==(r=null==o?void 0:o.node)?void 0:r.profile_url,joinedTime:null==(t=null==(a=c.find((o=>"GroupsProfileJoinedTimeMetaline"===o.__typename)))?void 0:a.text)?void 0:t.text,lastActiveTime:null==(_=null==(s=c.find((o=>"GroupsProfileLastActivityTimeMetaline"===o.__typename)))?void 0:s.text)?void 0:_.text,cursor:null==v?void 0:v.end_cursor}}))}async function d(e=""){var l,n,d,u,r,a;const t=await o({fb_api_req_friendly_name:"CometGroupMembersAdminsRootQuery",variables:{groupID:e,scale:2},doc_id:"8138328892873449"}),s=i(t);console.log(s);const v=(null==(l=null==s?void 0:s.data)?void 0:l.group)||{};return{groupId:e||"",adminCount:(null==(n=null==v?void 0:v.admin_and_moderator_profiles)?void 0:n.count)||0,memberCount:(null==(d=null==v?void 0:v.all_active_members)?void 0:d.count)||(null==(u=null==v?void 0:v.group_member_profiles)?void 0:u.count)||0,adminProfiles:null==(a=null==(r=null==v?void 0:v.group_admin_profiles)?void 0:r.edges)?void 0:a.map((o=>{var i,e,l,n,d,u;return{uid:null==(i=null==o?void 0:o.node)?void 0:i.id,name:null==(e=null==o?void 0:o.node)?void 0:e.name,avatar:null==(n=null==(l=null==o?void 0:o.node)?void 0:l.profile_picture)?void 0:n.uri,url:null==(d=null==o?void 0:o.node)?void 0:d.url,verified:null==(u=null==o?void 0:o.node)?void 0:u.is_verified}}))}}async function u({uid:n="",cursor:d}){const u=await o({fb_api_req_friendly_name:"ProfileCometAppCollectionGridRendererPaginationQuery",variables:{count:8,cursor:d??null,id:btoa(`app_collection:${n||await l()}:2361831622:66`)},doc_id:"5244211935648733"}),r=i(u);console.log(r);const{edges:a=[],page_info:t={}}=e(r);return a.map((o=>{var i,e,l,n,d;return{id:(null==(i=o.node.node)?void 0:i.id)||atob(o.node.id).split(":").at(-1),name:o.node.title.text,description:null==(n=null==(l=null==(e=o.node.subtitle_text)?void 0:e.text)?void 0:l.split("\n"))?void 0:n[1],url:o.node.url,visibility:o.node.node.visibility,image:o.node.image.uri,membersCount:Number(((null==(d=o.node.subtitle_text.text.split("\n"))?void 0:d[0])||"").match(/\d+/g).join("")??1),cursor:o.cursor}}))}var r=(o=>(o.NONE="NONE",o.TOP_LEVEL_GROUP="TOP_LEVEL_GROUP",o))(r||{}),a=(o=>(o.NOT_JOINED="NOT_JOINED",o.PENDING="PENDING",o.MEMBER="MEMBER",o.ADMIN="ADMIN",o))(a||{});function t(o,i="MEMBER"){var e,l,n,d,u,r,a,t,s;return{id:null==(e=null==o?void 0:o.node)?void 0:e.id,name:null==(l=null==o?void 0:o.node)?void 0:l.name,avatar:null==(d=null==(n=null==o?void 0:o.node)?void 0:n.profile_picture)?void 0:d.uri,url:null==(u=null==o?void 0:o.node)?void 0:u.url,lastVisitedTime:1e3*((null==(r=null==o?void 0:o.node)?void 0:r.viewer_last_visited_time)||(null==(a=null==o?void 0:o.node)?void 0:a.viewer_request_to_join_timestamp)||(null==(t=null==o?void 0:o.node)?void 0:t.last_post_time)||0),userType:i,cursor:null==o?void 0:o.cursor,subspaceType:(null==(s=null==o?void 0:o.node)?void 0:s.subspace_type)||"NONE"}}async function s({cursor:l="",ordering:n=["viewer_added"]}={}){var d,u,r,a;if(!l){const e=await o({fb_api_req_friendly_name:"GroupsCometJoinsRootQuery",variables:{ordering:n,scale:2},doc_id:"6985470494844388"}),l=i(e),s=[],{pending_groups:v={},all_joined_groups:_={}}=(null==(d=null==l?void 0:l.data)?void 0:d.viewer)||{};return null==(u=v.edges)||u.forEach((o=>{s.push(t(o,"PENDING"))})),null==(a=null==(r=_.tab_groups_list)?void 0:r.edges)||a.forEach((o=>{s.push(t(o,"MEMBER"))})),console.log(l),s}const s=await o({fb_api_req_friendly_name:"GroupsCometAllJoinedGroupsSectionPaginationQuery",variables:{cursor:l||null,ordering:n,count:20,scale:2},doc_id:"6009728632468556"}),v=i(s);console.log(v);const{edges:_=[],page_info:c={}}=e(v);return _.map((o=>t(o,"MEMBER")))}async function v({cursor:l=""}={}){var n;const d=await o({variables:{adminGroupsCount:1e3,memberGroupsCount:0,scale:1.5},doc_id:"4868264159917793"}),u=i(d);console.log(u);const{edges:r=[],page_info:a={}}=e(null==(n=null==u?void 0:u.data)?void 0:n.adminGroups);return r.map((o=>t(o,"ADMIN")))}async function _(e=""){var n;const d=await o({fb_api_req_friendly_name:"useGroupLeaveMutation",variables:{input:{group_id:e,readd_policy:"ALLOW_READD",source:"comet_group_page",actor_id:await l(),client_mutation_id:"1"},groupID:e},doc_id:"2018579381571489"}),u=i(d);return console.log(u),null!=(null==(n=null==u?void 0:u.data)?void 0:n.group_leave)}export{r as SubspaceType,a as UserTypeInGroup,d as getGroupMemberCount,n as getGroupMembers,s as getMyJoinedGroups,v as getMyManagedGroups,u as getOtherJoinedGroups,_ as leaveGroup};
