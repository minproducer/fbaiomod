const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VideoViewer-HdQ6aks3.js","./index-BoH2j3cU.js","./index-DY-hiTTZ.css","./videos-CoQTeQLu.js","./MyApp-D93h0aQZ.js","./useVIP-f__zpoad.js","./sweetalert2.esm.all-BZxvatOx.js","./getIds-CXkkWBEB.js","./index-7X6rB-D6.js","./SearchOutlined-BUONfEHJ.js","./index-IueWr_3q.js","./Dropdown-C4ZC00F-.js"])))=>i.map(i=>d[i]);
import{r as e,b3 as i,b8 as n,b4 as o,aQ as t}from"./index-BoH2j3cU.js";import{u as d,d as l,t as r,S as a,I as s,i as m,h as u,g as v,aS as c,l as g,e as h,f as p,T as f,o as j,b as x,k as y}from"./MyApp-D93h0aQZ.js";import{a as w}from"./tagged-BsamJxCG.js";import k from"./useCacheState-CRWoF5gI.js";import b from"./MyTable-B-PXqHUM.js";import{E as _}from"./ExportButton-bON9fXxS.js";import"./index-CLQrWQaN.js";import"./index-DFDl0PJq.js";import"./DownOutlined-DRGhK8zp.js";import"./Table-CSd7eQib.js";import"./List-BGWr2xJE.js";import"./index-BaNQURuW.js";import"./index-BS-7HFpi.js";import"./index-p3GZU5lJ.js";import"./index-DWB43XHw.js";import"./Dropdown-C4ZC00F-.js";import"./PurePanel-DNUOZ5MP.js";import"./move-DCq-oE7y.js";import"./index-CTitp5Qg.js";import"./index-UsPtaxTh.js";import"./SearchOutlined-BUONfEHJ.js";import"./useBreakpoint-CUrvcDr2.js";import"./Pagination-CIrtJa5e.js";import"./index-7X6rB-D6.js";import"./row-B1CxNhq6.js";const V=o((()=>t((()=>import("./VideoViewer-HdQ6aks3.js")),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),{fallback:y});function T({target:o}){const{ti:y}=d(),{message:T}=l(),[I,N]=k("VideoTagged."+(null==o?void 0:o.id),[]),[C,D]=k("VideoTagged.loading."+(null==o?void 0:o.id),!1),[E,L]=k("VideoTagged.loadMore."+(null==o?void 0:o.id),!1),[P,S]=e.useState(!0);e.useEffect((()=>{R()}),[null==o?void 0:o.id]);const A=e.useRef(null==o?void 0:o.id),R=(e=!1)=>{if(!(null==o?void 0:o.id)||C)return;const i=A.current!==(null==o?void 0:o.id);(e||!I.length||i)&&(A.current=null==o?void 0:o.id,r("VideoTagged:onClickReload"),D(!0),w(o.id).then((e=>{(null==e?void 0:e.length)?(console.log(e),N(e),S(!0)):(T.info(y({en:"No data: Video Tagged",vi:"Không có dữ liệu: Lượt tag video"})),S(!1))})).finally((()=>{D(!1)})))},O=i.jsx(n,{icon:i.jsx("i",{className:"fa-solid fa-play"}),loading:E,disabled:!P||C,onClick:async()=>{var e;if(!(null==o?void 0:o.id)||E)return;const{checkVIP:i}=await t((async()=>{const{checkVIP:e}=await import("./useVIP-f__zpoad.js");return{checkVIP:e}}),__vite__mapDeps([5,1,2,4,6,7,8,9,10,11]),import.meta.url);await i()&&(r("Tagged:onClickLoadMore"),L(!0),w(o.id,null==(e=I[I.length-1])?void 0:e.cursor).then((e=>{const i=new Set(I.map((e=>e.id))),n=e.filter((e=>!i.has(e.id)));n.length?(N((e=>[...e,...n])),S(!0)):(T.info(y({en:"No more data",vi:"Không còn dữ liệu"})),S(!1))})).finally((()=>L(!1))))},children:y(P?{en:"Load more",vi:"Tải thêm"}:{en:"No more data",vi:"Không còn dữ liệu"})}),F=[{title:"#",key:"index",dataIndex:"index"},{title:y({en:"Owner",vi:"Người tag"}),key:"from",dataIndex:"from",render:(e,n,o)=>{var t,d,l,r,v;return(null==(t=null==n?void 0:n.from)?void 0:t.id)?i.jsxs(a,{children:[i.jsx(s,{src:m(null==(d=null==n?void 0:n.from)?void 0:d.id),style:{width:45,height:45,borderRadius:5}}),i.jsxs(a,{direction:"vertical",size:0,children:[i.jsx("a",{href:u(null==(l=null==n?void 0:n.from)?void 0:l.id),target:"_blank",rel:"noreferrer",children:i.jsx("b",{children:null==(r=null==n?void 0:n.from)?void 0:r.name})}),i.jsx("span",{style:{opacity:.5},children:null==(v=null==n?void 0:n.from)?void 0:v.id})]})]}):y({en:"Anonymous",vi:"Ẩn danh"})},filters:Array.from(new Set(null==I?void 0:I.map((e=>{var i;return null==(i=e.from)?void 0:i.id})))).map((e=>{var i,n;const o=I.filter((i=>{var n;return(null==(n=i.from)?void 0:n.id)===e}));return{value:e||"",text:((null==(n=null==(i=null==o?void 0:o[0])?void 0:i.from)?void 0:n.name)||y({en:"Anonymous",vi:"Ẩn danh"}))+` (${null==o?void 0:o.length})`,count:null==o?void 0:o.length}})).sort(((e,i)=>i.count-e.count)),onFilter:(e,i)=>{var n;return(null==(n=i.from)?void 0:n.id)==e},width:250},{title:y({en:"Video",vi:"Video"}),key:"video",dataIndex:"video",render:(e,n,o)=>i.jsx(s,{src:null==n?void 0:n.picture,style:{width:200,height:150,objectFit:"contain"},preview:{destroyOnHidden:!0,toolbarRender:()=>null,imageRender:()=>i.jsx(V,{forceGetVideoInfo:!0,info:{id:null==n?void 0:n.id,source:null==n?void 0:n.source}})}})},{title:y({en:"Views",vi:"Lượt xem"}),key:"views",dataIndex:"views",render:(e,n,o)=>i.jsx("span",{children:v(null==n?void 0:n.views)}),sorter:(e,i)=>e.views-i.views,width:100},{title:y({en:"Length",vi:"Độ dài"}),key:"length",dataIndex:"length",render:(e,n,o)=>i.jsx("span",{children:c(null==n?void 0:n.length)}),sorter:(e,i)=>e.length-i.length,width:100},{title:y({en:"Content",vi:"Nội dung"}),key:"message",dataIndex:"message",render:(e,n,t)=>{var d;return i.jsx("div",{style:{wordBreak:"break-word",maxWidth:400},children:(null==(d=g(null==n?void 0:n.description,200))?void 0:d.replace(null==o?void 0:o.name,""))||(null==o?void 0:o.name)})}},{title:y({en:"Created at",vi:"Thời gian"}),key:"created_time",dataIndex:"created_time",render:(e,n,o)=>i.jsxs("span",{children:[h(new Date(e).getTime())," - ",p(new Date(e))]})},{title:y({en:"Action",vi:"Hành động"}),key:"action",dataIndex:"action",render:(e,o,t)=>i.jsx(f,{title:y({en:"View post",vi:"Xem bài viết"}),children:i.jsx(n,{target:"_blank",href:u((null==o?void 0:o.permalink_url)||(null==o?void 0:o.id)),icon:i.jsx("i",{className:"fa-solid fa-external-link"})})}),width:100}];return i.jsx(b,{data:I.map(((e,i)=>({...e,index:i+1}))),columns:F,searchable:!0,keyExtractor:e=>e.id,size:"small",renderTitle:()=>i.jsxs(i.Fragment,{children:[i.jsxs(a.Compact,{children:[i.jsx(n,{type:"primary",icon:i.jsx("i",{className:"fa-solid fa-rotate-right"}),loading:C,disabled:E,onClick:()=>R(!0),children:y({en:"Reload",vi:"Tải lại"})}),O]}),i.jsx(_,{data:I,options:[{key:"json",label:".json",prepareData:e=>({fileName:(null==o?void 0:o.name)+"_tagged_video.json",data:JSON.stringify(e,null,4)})},{key:"csv",label:".csv",prepareData:e=>({fileName:(null==o?void 0:o.name)+"_tagged_video.csv",data:j(e.map((e=>{var i,n;return{...e,from:null==(i=e.from)?void 0:i.id,fromName:null==(n=e.from)?void 0:n.name}})))})}]}),i.jsx(x,{color:"red",children:(null==I?void 0:I.length)+" "+y({en:"Tagged Video",vi:"Lượt tag video"})})]}),footer:i.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:O})})}export{T as default};
