import{r as e}from"./BqUCZHEx.js";import{d as t}from"./De0BBq3v.js";var r="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;function n(t,n){const s=e.useRef(t);r((()=>{s.current=t}),[t]),e.useEffect((()=>{const e=setInterval((()=>{s.current()}),n);return()=>{clearInterval(e)}}),[n])}function s(r,n=500,s){const c=e.useRef();!function(t){const r=e.useRef(t);r.current=t,e.useEffect((()=>()=>{r.current()}),[])}((()=>{c.current&&c.current.cancel()}));const o=e.useMemo((()=>{const e=t(r,n,s),o=(...t)=>e(...t);return o.cancel=()=>{e.cancel()},o.isPending=()=>!!c.current,o.flush=()=>e.flush(),o}),[r,n,s]);return e.useEffect((()=>{c.current=t(r,n,s)}),[r,n,s]),o}function c({threshold:t=0,root:r=null,rootMargin:n="0%",freezeOnceVisible:s=!1,initialIsIntersecting:c=!1,onChange:o}={}){var i;const[u,f]=e.useState(null),[a,l]=e.useState((()=>({isIntersecting:c,entry:void 0}))),d=e.useRef();d.current=o;const g=(null==(i=a.entry)?void 0:i.isIntersecting)&&s;e.useEffect((()=>{if(!u)return;if(!("IntersectionObserver"in window))return;if(g)return;const e=new IntersectionObserver((t=>{const r=Array.isArray(e.thresholds)?e.thresholds:[e.thresholds];t.forEach((e=>{const t=e.isIntersecting&&r.some((t=>e.intersectionRatio>=t));l({isIntersecting:t,entry:e}),d.current&&d.current(t,e)}))}),{threshold:t,root:r,rootMargin:n});return e.observe(u),()=>{e.disconnect()}}),[u,JSON.stringify(t),r,n,g,s]);const y=e.useRef(null);e.useEffect((()=>{var e;u||!(null==(e=a.entry)?void 0:e.target)||s||g||y.current===a.entry.target||(y.current=a.entry.target,l({isIntersecting:c,entry:void 0}))}),[u,a.entry,s,g,c]);const h=[f,!!a.isIntersecting,a.entry];return h.ref=h[0],h.isIntersecting=h[1],h.entry=h[2],h}export{c as a,n as b,s as u};
