import{h as e,i as t,a as n,_ as r,k as o,e as c,d as a,c as u,b as l,g as i}from"./Co2HKlK5.js";import{a as s,r as f}from"./BqUCZHEx.js";import{F as m}from"./ColXTbGM.js";import{c as d}from"./D61fuREp.js";import{d as g,e as v}from"./CWL1kuGj.js";var p=["b"],h=["v"],b=function(e){return Math.round(Number(e||0))},C=function(){e(l,m);var u=t(l);function l(e){return n(this,l),u.call(this,function(e){if(e instanceof m)return e;if(e&&"object"===a(e)&&"h"in e&&"b"in e){var t=e,n=t.b,r=o(t,p);return c(c({},r),{},{v:n})}return"string"==typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e}(e))}return r(l,[{key:"toHsbString",value:function(){var e=this.toHsb(),t=b(100*e.s),n=b(100*e.b),r=b(e.h),o=e.a,c="hsb(".concat(r,", ").concat(t,"%, ").concat(n,"%)"),a="hsba(".concat(r,", ").concat(t,"%, ").concat(n,"%, ").concat(o.toFixed(0===o?0:2),")");return 1===o?c:a}},{key:"toHsb",value:function(){var e=this.toHsv(),t=e.v,n=o(e,h);return c(c({},n),{},{b:t,a:this.a})}}]),l}(),E=function(e){return e instanceof C?e:new C(e)},y=E("#1677ff"),x=function(e){var t=e.offset,n=e.targetRef,r=e.containerRef,o=e.color,a=e.type,u=r.current.getBoundingClientRect(),l=u.width,i=u.height,s=n.current.getBoundingClientRect(),f=s.width/2,m=s.height/2,d=(t.x+f)/l,g=1-(t.y+m)/i,v=o.toHsb(),p=d,h=(t.x+f)/l*360;if(a)switch(a){case"hue":return E(c(c({},v),{},{h:h<=0?0:h}));case"alpha":return E(c(c({},v),{},{a:p<=0?0:p}))}return E({h:v.h,s:d<=0?0:d,b:g>=1?1:g,a:v.a})},R=function(e,t){var n=e.toHsb();switch(t){case"hue":return{x:n.h/360*100,y:50};case"alpha":return{x:100*e.a,y:50};default:return{x:100*n.s,y:100*(1-n.b)}}},w=function(e){var t=e.color,n=e.prefixCls,r=e.className,o=e.style,c=e.onClick,a="".concat(n,"-color-block");return s.createElement("div",{className:d(a,r),style:o,onClick:c},s.createElement("div",{className:"".concat(a,"-inner"),style:{background:t}}))};function L(e){var t=e.targetRef,n=e.containerRef,r=e.direction,o=e.onDragChange,c=e.onDragChangeComplete,a=e.calculate,l=e.color,i=e.disabledDrag,s=f.useState({x:0,y:0}),m=u(s,2),d=m[0],g=m[1],v=f.useRef(null),p=f.useRef(null);f.useEffect((function(){g(a())}),[l]),f.useEffect((function(){return function(){document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",p.current),document.removeEventListener("touchmove",v.current),document.removeEventListener("touchend",p.current),v.current=null,p.current=null}}),[]);var h=function(e){var c=function(e){var t="touches"in e?e.touches[0]:e,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-n,pageY:t.pageY-r}}(e),a=c.pageX,u=c.pageY,l=n.current.getBoundingClientRect(),i=l.x,s=l.y,f=l.width,m=l.height,g=t.current.getBoundingClientRect(),v=g.width,p=g.height,h=v/2,b=p/2,C=Math.max(0,Math.min(a-i,f))-h,E=Math.max(0,Math.min(u-s,m))-b,y={x:C,y:"x"===r?d.y:E};if(0===v&&0===p||v!==p)return!1;null==o||o(y)},b=function(e){e.preventDefault(),h(e)},C=function(e){e.preventDefault(),document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",p.current),document.removeEventListener("touchmove",v.current),document.removeEventListener("touchend",p.current),v.current=null,p.current=null,null==c||c()};return[d,function(e){document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",p.current),i||(h(e),document.addEventListener("mousemove",b),document.addEventListener("mouseup",C),document.addEventListener("touchmove",b),document.addEventListener("touchend",C),v.current=b,p.current=C)}]}var N=function(e){var t=e.size,n=void 0===t?"default":t,r=e.color,o=e.prefixCls;return s.createElement("div",{className:d("".concat(o,"-handler"),l({},"".concat(o,"-handler-sm"),"small"===n)),style:{backgroundColor:r}})},D=function(e){var t=e.children,n=e.style,r=e.prefixCls;return s.createElement("div",{className:"".concat(r,"-palette"),style:c({position:"relative"},n)},t)},M=f.forwardRef((function(e,t){var n=e.children,r=e.x,o=e.y;return s.createElement("div",{ref:t,style:{position:"absolute",left:"".concat(r,"%"),top:"".concat(o,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},n)})),k=function(e){var t=e.color,n=e.onChange,r=e.prefixCls,o=e.onChangeComplete,c=e.disabled,a=f.useRef(),l=f.useRef(),i=f.useRef(t),m=g((function(e){var r=x({offset:e,targetRef:l,containerRef:a,color:t});i.current=r,n(r)})),d=L({color:t,containerRef:a,targetRef:l,calculate:function(){return R(t)},onDragChange:m,onDragChangeComplete:function(){return null==o?void 0:o(i.current)},disabledDrag:c}),v=u(d,2),p=v[0],h=v[1];return s.createElement("div",{ref:a,className:"".concat(r,"-select"),onMouseDown:h,onTouchStart:h},s.createElement(D,{prefixCls:r},s.createElement(M,{x:p.x,y:p.y,ref:l},s.createElement(N,{color:t.toRgbString(),prefixCls:r})),s.createElement("div",{className:"".concat(r,"-saturation"),style:{backgroundColor:"hsl(".concat(t.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},H=function(e){var t=e.colors,n=e.children,r=e.direction,o=void 0===r?"to right":r,c=e.type,a=e.prefixCls,u=f.useMemo((function(){return t.map((function(e,n){var r=E(e);return"alpha"===c&&n===t.length-1&&(r=new C(r.setA(1))),r.toRgbString()})).join(",")}),[t,c]);return s.createElement("div",{className:"".concat(a,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(o,", ").concat(u,")")}},n)},S=function(e){var t=e.prefixCls,n=e.colors,r=e.disabled,o=e.onChange,c=e.onChangeComplete,a=e.color,l=e.type,i=f.useRef(),m=f.useRef(),v=f.useRef(a),p=function(e){return"hue"===l?e.getHue():100*e.a},h=g((function(e){var t=x({offset:e,targetRef:m,containerRef:i,color:a,type:l});v.current=t,o(p(t))})),b=L({color:a,targetRef:m,containerRef:i,calculate:function(){return R(a,l)},onDragChange:h,onDragChangeComplete:function(){c(p(v.current))},direction:"x",disabledDrag:r}),E=u(b,2),y=E[0],w=E[1],k=s.useMemo((function(){if("hue"===l){var e=a.toHsb();return e.s=1,e.b=1,e.a=1,new C(e)}return a}),[a,l]),S=s.useMemo((function(){return n.map((function(e){return"".concat(e.color," ").concat(e.percent,"%")}))}),[n]);return s.createElement("div",{ref:i,className:d("".concat(t,"-slider"),"".concat(t,"-slider-").concat(l)),onMouseDown:w,onTouchStart:w},s.createElement(D,{prefixCls:t},s.createElement(M,{x:y.x,y:y.y,ref:m},s.createElement(N,{size:"small",color:k.toHexString(),prefixCls:t})),s.createElement(H,{colors:S,type:l,prefixCls:t})))};var j=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],A=f.forwardRef((function(e,t){var n=e.value,r=e.defaultValue,o=e.prefixCls,c=void 0===o?"rc-color-picker":o,a=e.onChange,m=e.onChangeComplete,g=e.className,p=e.style,h=e.panelRender,b=e.disabledAlpha,x=void 0!==b&&b,R=e.disabled,L=void 0!==R&&R,N=function(e){return f.useMemo((function(){return[(e||{}).slider||S]}),[e])}(e.components),D=u(N,1)[0],M=function(e,t){var n=v(e,{value:t}),r=u(n,2),o=r[0],c=r[1];return[f.useMemo((function(){return E(o)}),[o]),c]}(r||y,n),H=u(M,2),A=H[0],B=H[1],T=f.useMemo((function(){return A.setA(1).toRgbString()}),[A]),X=function(e,t){n||B(e),null==a||a(e,t)},Y=function(e){return new C(A.setHue(e))},z=function(e){return new C(A.setA(e/100))},F=d("".concat(c,"-panel"),g,l({},"".concat(c,"-panel-disabled"),L)),I={prefixCls:c,disabled:L,color:A},O=s.createElement(s.Fragment,null,s.createElement(k,i({onChange:X},I,{onChangeComplete:m})),s.createElement("div",{className:"".concat(c,"-slider-container")},s.createElement("div",{className:d("".concat(c,"-slider-group"),l({},"".concat(c,"-slider-group-disabled-alpha"),x))},s.createElement(D,i({},I,{type:"hue",colors:j,min:0,max:359,value:A.getHue(),onChange:function(e){X(Y(e),{type:"hue",value:e})},onChangeComplete:function(e){m&&m(Y(e))}})),!x&&s.createElement(D,i({},I,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:T}],min:0,max:100,value:100*A.a,onChange:function(e){X(z(e),{type:"alpha",value:e})},onChangeComplete:function(e){m&&m(z(e))}}))),s.createElement(w,{color:A.toRgbString(),prefixCls:c})));return s.createElement("div",{className:F,style:p,ref:t},"function"==typeof h?h(O):O)}));export{C,w as a,A as b};
