import{f as e,w as t}from"./O7QFzXob.js";const n=/^\.+(\\|\/)|^\.+$/,r=/\.+$/;function c(c,s={}){const a=/[\u0000-\u001F\u0080-\u009F]/g,l=/([<>:"/\\|?*\u0000-\u001F]){2,}/g;if("string"!=typeof c)throw new TypeError("Expected a string");const o=void 0===s.replacement?"!":s.replacement;if(e().test(o)&&a.test(o))throw new Error("Replacement string cannot contain reserved filename characters");if(o.length>0&&(c=c.replace(l,"$1")),c=(c=(c=(c=(c=c.normalize("NFD")).replace(n,o)).replace(e(),o)).replace(a,o)).replace(r,""),o.length>0){"."===c[0]||"."!==c[0]||(c=o+c),"."===c[c.length-1]&&(c+=o)}c=t().test(c)?c+o:c;const i="number"==typeof s.maxLength?s.maxLength:100;if(c.length>i){const e=c.lastIndexOf(".");if(-1===e)c=c.slice(0,i);else{const t=c.slice(0,e),n=c.slice(e);c=t.slice(0,Math.max(1,i-n.length))+n}}return c}export{c as f};
