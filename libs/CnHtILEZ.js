import{r as e}from"./BHSFo268.js";var t,n,r,s,i,a,u,c,o,y,l,m,p,f;function x(){return n?t:(n=1,t={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}})}function K(){if(s)return r;s=1;var e=x().isArray;return r={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"==typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!=typeof e.spaces&&"string"!=typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(t){"alwaysArray"in t&&("boolean"==typeof t.alwaysArray||e(t.alwaysArray))||(t.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"==typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}}function g(){if(a)return i;a=1;var t,n,r=e(),s=K(),u=x().isArray;function c(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function o(e,r){var s;if(t.compact){if(!n[t[e+"Key"]]&&(u(t.alwaysArray)?-1!==t.alwaysArray.indexOf(t[e+"Key"]):t.alwaysArray)&&(n[t[e+"Key"]]=[]),n[t[e+"Key"]]&&!u(n[t[e+"Key"]])&&(n[t[e+"Key"]]=[n[t[e+"Key"]]]),e+"Fn"in t&&"string"==typeof r&&(r=t[e+"Fn"](r,n)),"instruction"===e&&("instructionFn"in t||"instructionNameFn"in t))for(s in r)if(r.hasOwnProperty(s))if("instructionFn"in t)r[s]=t.instructionFn(r[s],s,n);else{var i=r[s];delete r[s],r[t.instructionNameFn(s,i,n)]=i}u(n[t[e+"Key"]])?n[t[e+"Key"]].push(r):n[t[e+"Key"]]=r}else{n[t.elementsKey]||(n[t.elementsKey]=[]);var a={};if(a[t.typeKey]=e,"instruction"===e){for(s in r)if(r.hasOwnProperty(s))break;a[t.nameKey]="instructionNameFn"in t?t.instructionNameFn(s,r,n):s,t.instructionHasAttributes?(a[t.attributesKey]=r[s][t.attributesKey],"instructionFn"in t&&(a[t.attributesKey]=t.instructionFn(a[t.attributesKey],s,n))):("instructionFn"in t&&(r[s]=t.instructionFn(r[s],s,n)),a[t.instructionKey]=r[s])}else e+"Fn"in t&&(r=t[e+"Fn"](r,n)),a[t[e+"Key"]]=r;t.addParent&&(a[t.parentKey]=n),n[t.elementsKey].push(a)}}function y(e){var r;if("attributesFn"in t&&e&&(e=t.attributesFn(e,n)),(t.trim||"attributeValueFn"in t||"attributeNameFn"in t||t.nativeTypeAttributes)&&e)for(r in e)if(e.hasOwnProperty(r)&&(t.trim&&(e[r]=e[r].trim()),t.nativeTypeAttributes&&(e[r]=c(e[r])),"attributeValueFn"in t&&(e[r]=t.attributeValueFn(e[r],r,n)),"attributeNameFn"in t)){var s=e[r];delete e[r],e[t.attributeNameFn(r,e[r],n)]=s}return e}function l(e){var r={};if(e.body&&("xml"===e.name.toLowerCase()||t.instructionHasAttributes)){for(var s,i=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(s=i.exec(e.body));)r[s[1]]=s[2]||s[3]||s[4];r=y(r)}if("xml"===e.name.toLowerCase()){if(t.ignoreDeclaration)return;n[t.declarationKey]={},Object.keys(r).length&&(n[t.declarationKey][t.attributesKey]=r),t.addParent&&(n[t.declarationKey][t.parentKey]=n)}else{if(t.ignoreInstruction)return;t.trim&&(e.body=e.body.trim());var a={};t.instructionHasAttributes&&Object.keys(r).length?(a[e.name]={},a[e.name][t.attributesKey]=r):a[e.name]=e.body,o("instruction",a)}}function m(e,r){var s;if("object"==typeof e&&(r=e.attributes,e=e.name),r=y(r),"elementNameFn"in t&&(e=t.elementNameFn(e,n)),t.compact){var i;if(s={},!t.ignoreAttributes&&r&&Object.keys(r).length)for(i in s[t.attributesKey]={},r)r.hasOwnProperty(i)&&(s[t.attributesKey][i]=r[i]);!(e in n)&&(u(t.alwaysArray)?-1!==t.alwaysArray.indexOf(e):t.alwaysArray)&&(n[e]=[]),n[e]&&!u(n[e])&&(n[e]=[n[e]]),u(n[e])?n[e].push(s):n[e]=s}else n[t.elementsKey]||(n[t.elementsKey]=[]),(s={})[t.typeKey]="element",s[t.nameKey]=e,!t.ignoreAttributes&&r&&Object.keys(r).length&&(s[t.attributesKey]=r),t.alwaysChildren&&(s[t.elementsKey]=[]),n[t.elementsKey].push(s);s[t.parentKey]=n,n=s}function p(e){t.ignoreText||(e.trim()||t.captureSpacesBetweenElements)&&(t.trim&&(e=e.trim()),t.nativeType&&(e=c(e)),t.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),o("text",e))}function f(e){t.ignoreComment||(t.trim&&(e=e.trim()),o("comment",e))}function g(e){var r=n[t.parentKey];t.addParent||delete n[t.parentKey],n=r}function F(e){t.ignoreCdata||(t.trim&&(e=e.trim()),o("cdata",e))}function E(e){t.ignoreDoctype||(e=e.replace(/^ /,""),t.trim&&(e=e.trim()),o("doctype",e))}function b(e){e.note=e}return i=function(e,i){var a=r.parser(!0,{}),u={};if(n=u,t=function(e){return t=s.copyOptions(e),s.ensureFlagExists("ignoreDeclaration",t),s.ensureFlagExists("ignoreInstruction",t),s.ensureFlagExists("ignoreAttributes",t),s.ensureFlagExists("ignoreText",t),s.ensureFlagExists("ignoreComment",t),s.ensureFlagExists("ignoreCdata",t),s.ensureFlagExists("ignoreDoctype",t),s.ensureFlagExists("compact",t),s.ensureFlagExists("alwaysChildren",t),s.ensureFlagExists("addParent",t),s.ensureFlagExists("trim",t),s.ensureFlagExists("nativeType",t),s.ensureFlagExists("nativeTypeAttributes",t),s.ensureFlagExists("sanitize",t),s.ensureFlagExists("instructionHasAttributes",t),s.ensureFlagExists("captureSpacesBetweenElements",t),s.ensureAlwaysArrayExists(t),s.ensureKeyExists("declaration",t),s.ensureKeyExists("instruction",t),s.ensureKeyExists("attributes",t),s.ensureKeyExists("text",t),s.ensureKeyExists("comment",t),s.ensureKeyExists("cdata",t),s.ensureKeyExists("doctype",t),s.ensureKeyExists("type",t),s.ensureKeyExists("name",t),s.ensureKeyExists("elements",t),s.ensureKeyExists("parent",t),s.checkFnExists("doctype",t),s.checkFnExists("instruction",t),s.checkFnExists("cdata",t),s.checkFnExists("comment",t),s.checkFnExists("text",t),s.checkFnExists("instructionName",t),s.checkFnExists("elementName",t),s.checkFnExists("attributeName",t),s.checkFnExists("attributeValue",t),s.checkFnExists("attributes",t),t}(i),a.opt={strictEntities:!0},a.onopentag=m,a.ontext=p,a.oncomment=f,a.onclosetag=g,a.onerror=b,a.oncdata=F,a.ondoctype=E,a.onprocessinginstruction=l,a.write(e).close(),u[t.elementsKey]){var c=u[t.elementsKey];delete u[t.elementsKey],u[t.elementsKey]=c,delete u.text}return u}}function F(){if(c)return u;c=1;var e=K(),t=g();return u=function(n,r){var s,i,a;return s=function(t){var n=e.copyOptions(t);return e.ensureSpacesExists(n),n}(r),i=t(n,s),a="compact"in s&&s.compact?"_parent":"parent",("addParent"in s&&s.addParent?JSON.stringify(i,(function(e,t){return e===a?"_":t}),s.spaces):JSON.stringify(i,null,s.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}}function E(){if(y)return o;y=1;var e,t,n=K(),r=x().isArray;function s(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function i(n,r,i){if(r.ignoreAttributes)return"";"attributesFn"in r&&(n=r.attributesFn(n,t,e));var a,u,c,o,y=[];for(a in n)n.hasOwnProperty(a)&&null!==n[a]&&void 0!==n[a]&&(o=r.noQuotesForNativeAttributes&&"string"!=typeof n[a]?"":'"',u=(u=""+n[a]).replace(/"/g,"&quot;"),c="attributeNameFn"in r?r.attributeNameFn(a,u,t,e):a,y.push(r.spaces&&r.indentAttributes?s(r,i+1,!1):" "),y.push(c+"="+o+("attributeValueFn"in r?r.attributeValueFn(u,a,t,e):u)+o));return n&&Object.keys(n).length&&r.spaces&&r.indentAttributes&&y.push(s(r,i,!1)),y.join("")}function a(n,r,s){return e=n,t="xml",r.ignoreDeclaration?"":"<?xml"+i(n[r.attributesKey],r,s)+"?>"}function u(n,r,s){if(r.ignoreInstruction)return"";var a;for(a in n)if(n.hasOwnProperty(a))break;var u="instructionNameFn"in r?r.instructionNameFn(a,n[a],t,e):a;if("object"==typeof n[a])return e=n,t=u,"<?"+u+i(n[a][r.attributesKey],r,s)+"?>";var c=n[a]?n[a]:"";return"instructionFn"in r&&(c=r.instructionFn(c,a,t,e)),"<?"+u+(c?" "+c:"")+"?>"}function c(n,r){return r.ignoreComment?"":"\x3c!--"+("commentFn"in r?r.commentFn(n,t,e):n)+"--\x3e"}function l(n,r){return r.ignoreCdata?"":"<![CDATA["+("cdataFn"in r?r.cdataFn(n,t,e):n.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function m(n,r){return r.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in r?r.doctypeFn(n,t,e):n)+">"}function p(n,r){return r.ignoreText?"":(n=(n=(n=""+n).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in r?r.textFn(n,t,e):n)}function f(n,r,a,o){return n.reduce((function(n,y){var x=s(r,a,o&&!n);switch(y.type){case"element":return n+x+function(n,r,s){e=n,t=n.name;var a=[],u="elementNameFn"in r?r.elementNameFn(n.name,n):n.name;a.push("<"+u),n[r.attributesKey]&&a.push(i(n[r.attributesKey],r,s));var c=n[r.elementsKey]&&n[r.elementsKey].length||n[r.attributesKey]&&"preserve"===n[r.attributesKey]["xml:space"];return c||(c="fullTagEmptyElementFn"in r?r.fullTagEmptyElementFn(n.name,n):r.fullTagEmptyElement),c?(a.push(">"),n[r.elementsKey]&&n[r.elementsKey].length&&(a.push(f(n[r.elementsKey],r,s+1)),e=n,t=n.name),a.push(r.spaces&&function(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;default:return!0}return!1}(n,r)?"\n"+Array(s+1).join(r.spaces):""),a.push("</"+u+">")):a.push("/>"),a.join("")}(y,r,a);case"comment":return n+x+c(y[r.commentKey],r);case"doctype":return n+x+m(y[r.doctypeKey],r);case"cdata":return n+(r.indentCdata?x:"")+l(y[r.cdataKey],r);case"text":return n+(r.indentText?x:"")+p(y[r.textKey],r);case"instruction":var K={};return K[y[r.nameKey]]=y[r.attributesKey]?y:y[r.instructionKey],n+(r.indentInstruction?x:"")+u(K,r,a)}}),"")}function g(e,t,n){var r;for(r in e)if(e.hasOwnProperty(r))switch(r){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function F(n,r,a,u,c){e=n,t=r;var o="elementNameFn"in a?a.elementNameFn(r,n):r;if(null==n||""===n)return"fullTagEmptyElementFn"in a&&a.fullTagEmptyElementFn(r,n)||a.fullTagEmptyElement?"<"+o+"></"+o+">":"<"+o+"/>";var y=[];if(r){if(y.push("<"+o),"object"!=typeof n)return y.push(">"+p(n,a)+"</"+o+">"),y.join("");n[a.attributesKey]&&y.push(i(n[a.attributesKey],a,u));var l=g(n,a,!0)||n[a.attributesKey]&&"preserve"===n[a.attributesKey]["xml:space"];if(l||(l="fullTagEmptyElementFn"in a?a.fullTagEmptyElementFn(r,n):a.fullTagEmptyElement),!l)return y.push("/>"),y.join("");y.push(">")}return y.push(E(n,a,u+1,!1)),e=n,t=r,r&&y.push((c?s(a,u,!1):"")+"</"+o+">"),y.join("")}function E(e,t,n,i){var o,y,f,x=[];for(y in e)if(e.hasOwnProperty(y))for(f=r(e[y])?e[y]:[e[y]],o=0;o<f.length;++o){switch(y){case t.declarationKey:x.push(a(f[o],t,n));break;case t.instructionKey:x.push((t.indentInstruction?s(t,n,i):"")+u(f[o],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:x.push((t.indentText?s(t,n,i):"")+p(f[o],t));break;case t.cdataKey:x.push((t.indentCdata?s(t,n,i):"")+l(f[o],t));break;case t.doctypeKey:x.push(s(t,n,i)+m(f[o],t));break;case t.commentKey:x.push(s(t,n,i)+c(f[o],t));break;default:x.push(s(t,n,i)+F(f[o],y,t,n,g(f[o],t)))}i=i&&!x.length}return x.join("")}return o=function(r,s){s=function(e){var t=n.copyOptions(e);return n.ensureFlagExists("ignoreDeclaration",t),n.ensureFlagExists("ignoreInstruction",t),n.ensureFlagExists("ignoreAttributes",t),n.ensureFlagExists("ignoreText",t),n.ensureFlagExists("ignoreComment",t),n.ensureFlagExists("ignoreCdata",t),n.ensureFlagExists("ignoreDoctype",t),n.ensureFlagExists("compact",t),n.ensureFlagExists("indentText",t),n.ensureFlagExists("indentCdata",t),n.ensureFlagExists("indentAttributes",t),n.ensureFlagExists("indentInstruction",t),n.ensureFlagExists("fullTagEmptyElement",t),n.ensureFlagExists("noQuotesForNativeAttributes",t),n.ensureSpacesExists(t),"number"==typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),n.ensureKeyExists("declaration",t),n.ensureKeyExists("instruction",t),n.ensureKeyExists("attributes",t),n.ensureKeyExists("text",t),n.ensureKeyExists("comment",t),n.ensureKeyExists("cdata",t),n.ensureKeyExists("doctype",t),n.ensureKeyExists("type",t),n.ensureKeyExists("name",t),n.ensureKeyExists("elements",t),n.checkFnExists("doctype",t),n.checkFnExists("instruction",t),n.checkFnExists("cdata",t),n.checkFnExists("comment",t),n.checkFnExists("text",t),n.checkFnExists("instructionName",t),n.checkFnExists("elementName",t),n.checkFnExists("attributeName",t),n.checkFnExists("attributeValue",t),n.checkFnExists("attributes",t),n.checkFnExists("fullTagEmptyElement",t),t}(s);var i=[];return e=r,t="_root_",s.compact?i.push(E(r,s,0,!0)):(r[s.declarationKey]&&i.push(a(r[s.declarationKey],s,0)),r[s.elementsKey]&&r[s.elementsKey].length&&i.push(f(r[s.elementsKey],s,0,!i.length))),i.join("")}}var b=function(){if(f)return p;f=1;var e=g(),t=F(),n=E(),r=function(){if(m)return l;m=1;var e=E();return l=function(t,n){t instanceof Buffer&&(t=t.toString());var r=null;if("string"==typeof t)try{r=JSON.parse(t)}catch(s){throw new Error("The JSON structure is invalid")}else r=t;return e(r,n)}}();return p={xml2js:e,xml2json:t,js2xml:n,json2xml:r}}();export{b as l};
