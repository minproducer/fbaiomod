import{k as e,c as t,g as o,b as n}from"./Co2HKlK5.js";import{T as r}from"./CvnFzuED.js";import{c as i}from"./D61fuREp.js";import{q as a,K as s,j as l,l as f,s as c}from"./CWL1kuGj.js";import{r as u,a as p}from"./BqUCZHEx.js";var v=s.ESC,m=s.TAB;var d=u.forwardRef((function(e,t){var o=e.overlay,n=e.arrow,r=e.prefixCls,i=u.useMemo((function(){return"function"==typeof o?o():o}),[o]),a=l(t,f(i));return p.createElement(p.Fragment,null,n&&p.createElement("div",{className:"".concat(r,"-arrow")}),p.cloneElement(i,{ref:c(i)?a:void 0}))})),g={adjustX:1,adjustY:1},w=[0,0],b={topLeft:{points:["bl","tl"],overflow:g,offset:[0,-4],targetOffset:w},top:{points:["bc","tc"],overflow:g,offset:[0,-4],targetOffset:w},topRight:{points:["br","tr"],overflow:g,offset:[0,-4],targetOffset:w},bottomLeft:{points:["tl","bl"],overflow:g,offset:[0,4],targetOffset:w},bottom:{points:["tc","bc"],overflow:g,offset:[0,4],targetOffset:w},bottomRight:{points:["tr","br"],overflow:g,offset:[0,4],targetOffset:w}},h=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function y(s,g){var w,y=s.arrow,C=void 0!==y&&y,R=s.prefixCls,E=void 0===R?"rc-dropdown":R,N=s.transitionName,O=s.animation,A=s.align,j=s.placement,k=void 0===j?"bottomLeft":j,x=s.placements,P=void 0===x?b:x,V=s.getPopupContainer,F=s.showAction,L=s.hideAction,S=s.overlayClassName,T=s.overlayStyle,M=s.visible,W=s.trigger,D=void 0===W?["hover"]:W,K=s.autoFocus,q=s.overlay,B=s.children,H=s.onVisibleChange,I=e(s,h),X=p.useState(),Y=t(X,2),z=Y[0],G=Y[1],J="visible"in s?M:z,Q=p.useRef(null),U=p.useRef(null),Z=p.useRef(null);p.useImperativeHandle(g,(function(){return Q.current}));var $=function(e){G(e),null==H||H(e)};!function(e){var t=e.visible,o=e.triggerRef,n=e.onVisibleChange,r=e.autoFocus,i=e.overlayRef,s=u.useRef(!1),l=function(){var e,r;t&&(null===(e=o.current)||void 0===e||null===(r=e.focus)||void 0===r||r.call(e),null==n||n(!1))},f=function(){var e;return!(null===(e=i.current)||void 0===e||!e.focus||(i.current.focus(),s.current=!0,0))},c=function(e){switch(e.keyCode){case v:l();break;case m:var t=!1;s.current||(t=f()),t?e.preventDefault():l()}};u.useEffect((function(){return t?(window.addEventListener("keydown",c),r&&a(f,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}}),[t])}({visible:J,triggerRef:Z,onVisibleChange:$,autoFocus:K,overlayRef:U});var _,ee,te,oe=function(){return p.createElement(d,{ref:U,overlay:q,prefixCls:E,arrow:C})},ne=p.cloneElement(B,{className:i(null===(w=B.props)||void 0===w?void 0:w.className,J&&(_=s.openClassName,void 0!==_?_:"".concat(E,"-open"))),ref:c(B)?l(Z,f(B)):void 0}),re=L;return re||-1===D.indexOf("contextMenu")||(re=["click"]),p.createElement(r,o({builtinPlacements:P},I,{prefixCls:E,ref:Q,popupClassName:i(S,n({},"".concat(E,"-show-arrow"),C)),popupStyle:T,action:D,showAction:F,hideAction:re,popupPlacement:k,popupAlign:A,popupTransitionName:N,popupAnimation:O,popupVisible:J,stretch:(ee=s.minOverlayWidthMatchTrigger,te=s.alignPoint,("minOverlayWidthMatchTrigger"in s?ee:!te)?"minWidth":""),popup:"function"==typeof q?oe:oe(),onPopupVisibleChange:$,onPopupClick:function(e){var t=s.onOverlayClick;G(!1),t&&t(e)},getPopupContainer:V}),ne)}const C=p.forwardRef(y);export{C as D};
